(function(e){function t(t){for(var a,c,i=t[0],s=t[1],l=t[2],u=0,f=[];u<i.length;u++)c=i[u],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&f.push(r[c][0]),r[c]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);d&&d(t);while(f.length)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,i=1;i<n.length;i++){var s=n[i];0!==r[s]&&(a=!1)}a&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var a={},r={app:0},o=[];function c(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=a,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)c.d(n,a,function(t){return e[t]}.bind(null,a));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var d=s;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"002f":function(e,t,n){"use strict";n.r(t),n.d(t,"Decrypt",(function(){return l}));n("e260"),n("fb6a"),n("ace4"),n("e6cf"),n("5cc6"),n("b39a"),n("ddb0"),n("2b3d");var a=n("06dc"),r=n("fd2f");const o=n("cb96"),c=[105,102,109,116],i=[254,254,254,254],s={" WAV":".wav",FLAC:".flac"," MP3":".mp3"," A4M":".m4a"};async function l(e,t,n){const l=new Uint8Array(await Object(a["d"])(e));if(!Object(a["f"])(c,l.slice(0,4))||!Object(a["f"])(i,l.slice(8,12)))return"xm"===n?{status:!1,message:"Invalid xm file detected"}:await Object(r["Decrypt"])(e,t,n,!0);let d=(new TextDecoder).decode(l.slice(4,8));if(!s.hasOwnProperty(d))return{status:!1,message:"Unknown xm file type found"};let u=l[15],f=l[12]|l[13]<<8|l[14]<<16,m=l.slice(16),h=m.length;for(let a=f;a<h;++a)m[a]=m[a]-u^255;const b=Object(a["b"])(m,"mp3"),p=a["a"][b];let g=new Blob([m],{type:p});const w=await o.parseBlob(g);"wav"===b&&(w.common.album="",w.common.artist="",w.common.title="");const y=Object(a["e"])(w.common.artist,w.common.title,t,"_");return{status:!0,title:y.title,artist:y.artist,ext:b,album:w.common.album,file:URL.createObjectURL(g),mime:p,rawExt:"xm"}}},"034f":function(e,t,n){"use strict";var a=n("85ec"),r=n.n(a);r.a},"06dc":function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"g",(function(){return c})),n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return m})),n.d(t,"b",(function(){return h})),n.d(t,"h",(function(){return b}));n("fb6a"),n("e6cf"),n("1276"),n("498a");const a=n("7907"),r=[102,76,97,67],o=[73,68,51],c=[79,103,103,83],i=[102,116,121,112],s=[48,38,178,117,142,102,207,17,166,217,0,170,0,98,206,108],l=[82,73,70,70],d={mp3:"audio/mpeg",flac:"audio/flac",m4a:"audio/mp4",ogg:"audio/ogg",wma:"audio/x-ms-wma",wav:"audio/x-wav"};async function u(e){return await new Promise(t=>{const n=new FileReader;n.onload=e=>{t(e.target.result)},n.readAsArrayBuffer(e)})}function f(e,t,n,a="-"){let r="",o="",c=n.split(a);return c.length>1?(r=c[0].trim(),o=c[1].trim()):1===c.length&&(o=c[0].trim()),"string"==typeof e&&""!==e&&(r=e),"string"==typeof t&&""!==t&&(o=t),{artist:r,title:o}}function m(e,t){return e.every((e,n)=>e===t[n])}function h(e,t){return m(o,e.slice(0,o.length))?"mp3":m(r,e.slice(0,r.length))?"flac":m(c,e.slice(0,c.length))?"ogg":m(i,e.slice(4,4+i.length))?"m4a":m(s,e.slice(0,s.length))?"wma":m(l,e.slice(0,l.length))?"wav":t}async function b(e,t,n,r){const o=new a(e);return o.setFrame("TPE1",t).setFrame("TIT2",n).setFrame("TALB",r),o.addTag(),o.arrayBuffer}},1:function(e,t){},2:function(e,t){},"282c":function(e,t,n){"use strict";n.r(t),n.d(t,"Decrypt",(function(){return c}));n("e260"),n("ace4"),n("e6cf"),n("5cc6"),n("b39a"),n("ddb0"),n("2b3d");var a=n("06dc"),r=n("acf9");const o=n("cb96");async function c(e,t,n){const c=new Uint8Array(await Object(a["d"])(e));let i=c.length;for(let a=0;a<i;a++)c[a]^=163;const s=Object(a["b"])(c,"mp3");e=new Blob([c],{type:a["a"][s]});const l=await o.parseBlob(e);for(let a in l.native)l.native[a].some(e=>"TCON"===e.id&&"(12)"===e.value)&&(l.common.artist=Object(r["decode"])(l.common.artist,"gbk"),l.common.title=Object(r["decode"])(l.common.title,"gbk"),l.common.album=Object(r["decode"])(l.common.album,"gbk"));const d=Object(a["e"])(l.common.artist,l.common.title,t);return{status:!0,title:d.title,artist:d.artist,ext:s,album:l.common.album,file:URL.createObjectURL(e),mime:a["a"][s]}}},"2fd6":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("ace4");class a{constructor(e,t=64){if(16!=e.length)throw"incorrect key size";if(0!=(1&t))throw"odd number of rounds specified";this.delta=2654435769;const n=new DataView(e.buffer);this.k0=n.getUint32(0,!1),this.k1=n.getUint32(4,!1),this.k2=n.getUint32(8,!1),this.k3=n.getUint32(12,!1),this.rounds=t}encrypt(e,t){let n=t.getUint32(0,!1),a=t.getUint32(4,!1),r=0;for(let o=0;o<this.rounds/2;o++)r+=this.delta,n+=(a<<4)+this.k0^a+r^(a>>>5)+this.k1,a+=(n<<4)+this.k2^n+r^(n>>>5)+this.k3;e.setUint32(0,n,!1),e.setUint32(4,a,!1)}decrypt(e,t){let n=t.getUint32(0,!1),a=t.getUint32(4,!1),r=this.delta*this.rounds/2;for(let o=0;o<this.rounds/2;o++)a-=(n<<4)+this.k2^n+r^(n>>>5)+this.k3,n-=(a<<4)+this.k0^a+r^(a>>>5)+this.k1,r-=this.delta;e.setUint32(0,n,!1),e.setUint32(4,a,!1)}}},3:function(e,t){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,n){"use strict";n.r(t);n("46a1"),n("450d");var a=n("e5f2"),r=n.n(a),o=(n("6b30"),n("c284")),c=n.n(o),i=(n("0c67"),n("299c")),s=n.n(i),l=(n("b5d8"),n("f494")),d=n.n(l),u=(n("560b"),n("dcdc")),f=n.n(u),m=(n("f225"),n("89a9")),h=n.n(m),b=(n("f4f9"),n("c2cc")),p=n.n(b),g=(n("7a0f"),n("0f6c")),w=n.n(g),y=(n("aaa5"),n("a578")),v=n.n(y),_=(n("adec"),n("3d2d")),k=n.n(_),x=(n("bdc7"),n("aa2f")),O=n.n(x),j=(n("de31"),n("c69e")),S=n.n(j),M=(n("5466"),n("ecdf")),D=n.n(M),U=(n("38a0"),n("ad41")),E=n.n(U),A=(n("1951"),n("eedf")),T=n.n(A),N=(n("acb6"),n("c673")),C=n.n(N),I=(n("fd71"),n("a447")),B=n.n(I),L=n("2b0e"),F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",{attrs:{id:"app"}},[n("el-main",[n("x-upload",{on:{handle_error:e.showFail,handle_finish:e.showSuccess}}),n("div",{attrs:{id:"app-control"}},[n("el-row",{staticStyle:{"padding-bottom":"1em","font-size":"14px"}},[e._v(" Output file naming format： "),n("el-radio",{attrs:{label:"1",name:"format"},model:{value:e.download_format,callback:function(t){e.download_format=t},expression:"download_format"}},[e._v("Same as input file name")]),n("el-radio",{attrs:{label:"2",name:"format"},model:{value:e.download_format,callback:function(t){e.download_format=t},expression:"download_format"}},[e._v("Artist-Title")]),n("el-radio",{attrs:{label:"3",name:"format"},model:{value:e.download_format,callback:function(t){e.download_format=t},expression:"download_format"}},[e._v("Title")]),n("el-radio",{attrs:{label:"4",name:"format"},model:{value:e.download_format,callback:function(t){e.download_format=t},expression:"download_format"}},[e._v("Title-Artist")])],1),n("el-row",[n("el-button",{attrs:{icon:"el-icon-download",plain:""},on:{click:e.handleDownloadAll}},[e._v("Download All")]),n("el-button",{attrs:{icon:"el-icon-delete",plain:"",type:"danger"},on:{click:e.handleDeleteAll}},[e._v("Clear All")]),n("el-checkbox",{staticStyle:{"margin-left":"1em"},attrs:{border:""},model:{value:e.single_loop,callback:function(t){e.single_loop=t},expression:"single_loop"}},[e._v("Loop")]),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top-start"}},[n("div",{attrs:{slot:"content"},slot:"content"},[e._v(" We recommended you enable this option when inputing a large number of files."),n("br"),e._v(" The decrypted result will be downloaded directly when this option is enabled. ")]),n("el-checkbox",{staticStyle:{"margin-left":"-1.4em"},attrs:{border:""},model:{value:e.instant_download,callback:function(t){e.instant_download=t},expression:"instant_download"}},[e._v("Instant Download")])],1)],1)],1),n("audio",{attrs:{autoplay:e.playing_auto,src:e.playing_url,loop:e.single_loop,controlslist:"nodownload",controls:""}}),n("x-preview",{attrs:{download_format:e.download_format,"table-data":e.tableData},on:{music_changed:e.changePlaying}})],1),n("el-footer",{attrs:{id:"app-footer"}},[n("el-row",[n("a",{attrs:{target:"_blank"}},[e._v("Music Decryptor")]),e._v("(v"),n("span",{domProps:{textContent:e._s(e.version)}}),e._v(")：Decrypt encrypted music files in browser. ")]),n("el-row",[e._v(" Now we support decrypting Netease Music(ncm), QQ Music(qmcflac, qmc, mflac, mgg), Xiami(xm), Kuwo(kwm) and more! ")]),n("el-row",[e._v(" Select Language: "),n("a",{attrs:{href:"../",target:"_self"}},[e._v("中文 (简体) ")]),e._v(" "),n("a",{attrs:{target:"_self"}},[e._v(" English")])]),n("el-row",[e._v(" This program is open source using MIT license. ")])],1)],1)},R=[],P=(n("e6cf"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-upload",{attrs:{"auto-upload":!1,"on-change":e.handleFile,"show-file-list":!1,action:"",drag:"",multiple:""}},[n("i",{staticClass:"el-icon-upload"}),n("div",{staticClass:"el-upload__text"},[e._v("Drag your file here or "),n("em",[e._v("Choose File...")])]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("The program decrypts your files in browser. No Internet connection is needed.")]),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("Number of working threads: "),n("span",{domProps:{textContent:e._s(e.thread_num)}})]),n("transition",{attrs:{name:"el-fade-in"}},[n("el-progress",{directives:[{name:"show",rawName:"v-show",value:e.progress_show,expression:"progress_show"}],staticStyle:{margin:"16px 6px 0 6px"},attrs:{format:e.progressFormat,percentage:e.progress_percent,"stroke-width":16,"text-inside":!0}})],1)],1)}),q=[],$={name:"upload",data(){return{cacheQueue:[],workers:[],idle_workers:[],thread_num:1,progress_show:!1,progress_finished:0,progress_all:0,progress_percent:0}},mounted(){if(navigator.hardwareConcurrency>1&&"https:"===document.location.protocol){const e=n("bfa2");this.thread_num=navigator.hardwareConcurrency;for(let t=0;t<this.thread_num;t++)this.workers.push(e().CommonDecrypt),this.idle_workers.push(t)}else{const e=n("bd2e");this.workers.push(e.CommonDecrypt),this.idle_workers.push(0)}},methods:{progressFormat(){return this.progress_finished+"/"+this.progress_all},progressChange(e,t){this.progress_all+=t,this.progress_finished+=e,this.progress_percent=Math.round(this.progress_finished/this.progress_all*100),this.progress_finished===this.progress_all?setTimeout(()=>{this.progress_show=!1,this.progress_finished=0,this.progress_all=0},3e3):this.progress_show=!0},handleFile(e){this.progressChange(0,1),this.idle_workers.length>0?this.handleDoFile(e,this.idle_workers.shift()):this.cacheQueue.push(e)},handleCacheQueue(e){0!==this.cacheQueue.length?this.handleDoFile(this.cacheQueue.shift(),e):this.idle_workers.push(e)},handleDoFile(e,t){this.workers[t](e).then(e=>{this.$emit("handle_finish",e),this.handleCacheQueue(t),this.progressChange(1,0)}).catch(n=>{this.$emit("handle_error",n,e.name),this.handleCacheQueue(t),this.progressChange(1,0)})}}},G=$,Z=(n("f696"),n("2877")),Q=Object(Z["a"])(G,P,q,!1,null,"15e6b1c3",null),z=Q.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[n("el-table-column",{attrs:{label:"Cover"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",{staticClass:"image-slot el-image__error",staticStyle:{width:"100px",height:"100px"}},[e._v(" No cover ")])]}}])}),n("el-table-column",{attrs:{label:"Title"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(e._s(t.row.title))])]}}])}),n("el-table-column",{attrs:{label:"Artist"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("p",[e._v(e._s(t.row.artist))])]}}])}),n("el-table-column",{attrs:{label:"Album"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("p",[e._v(e._s(t.row.album))])]}}])}),n("el-table-column",{attrs:{label:"Operations"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{circle:"",icon:"el-icon-video-play",type:"success"},on:{click:function(n){return e.handlePlay(t.$index,t.row)}}}),n("el-button",{attrs:{circle:"",icon:"el-icon-download"},on:{click:function(n){return e.handleDownload(t.row)}}}),n("el-button",{attrs:{circle:"",icon:"el-icon-delete",type:"danger"},on:{click:function(n){return e.handleDelete(t.$index,t.row)}}})]}}])})],1)},W=[];n("a434"),n("e260"),n("ddb0"),n("2b3d");function H(e,t){const n=document.createElement("a");switch(n.href=e.file,t){default:case"1":n.download=e.rawFilename+"."+e.ext;break;case"2":n.download=e.artist+"-"+e.title+"."+e.ext;break;case"3":n.download=e.title+"."+e.ext;break;case"4":n.download=e.title+"-"+e.artist+"."+e.ext;break}document.body.append(n),n.click(),n.remove()}function J(e){URL.revokeObjectURL(e.file)}var K={name:"preview",props:{tableData:{type:Array,required:!0},download_format:{type:String,required:!0}},methods:{handlePlay(e,t){this.$emit("music_changed",t.file)},handleDelete(e,t){J(t),this.tableData.splice(e,1)},handleDownload(e){H(e,this.download_format)}}},X=K,Y=Object(Z["a"])(X,V,W,!1,null,"7ff8cdec",null),ee=Y.exports,te=n("9224"),ne={name:"app",components:{xUpload:z,xPreview:ee},data(){return{version:te.version,activeIndex:"1",tableData:[],playing_url:"",playing_auto:!1,single_loop:!1,download_format:"1",instant_download:!1}},created(){this.$nextTick((function(){this.finishLoad()}))},methods:{async finishLoad(){const e=document.getElementById("loader-mask");e.remove(),this.$notify.info({title:"Welcome!",message:"We use PWA technology so that you can use it without network.<br/>Recent update: "+te.updateInfo,dangerouslyUseHTMLString:!0,duration:1e4,position:"top-left"})},showSuccess(e){e.status?this.instant_download?(H(e,this.download_format),J(e)):(this.tableData.push(e),this.$notify.success({title:"Success",message:e.title+" is decrypted successfully.",duration:3e3})):this.showFail(e.message,e.rawFilename+"."+e.rawExt)},showFail(e,t){this.$notify.error({title:"Error Happens!",message:"Unable to continue decrypting: "+e+" when processing input: "+t,dangerouslyUseHTMLString:!0,duration:6e3})},changePlaying(e){this.playing_url=e,this.playing_auto=!0},handleDeleteAll(){this.tableData.forEach(e=>{J(e)}),this.tableData=[]},handleDownloadAll(){let e=0,t=setInterval(()=>{e<this.tableData.length?(H(this.tableData[e],this.download_format),e++):clearInterval(t)},300)},setLoopAudio(){this.single_loop?this.single_loop=!1:this.single_loop=!0}}},ae=ne,re=(n("034f"),Object(Z["a"])(ae,F,R,!1,null,null,null)),oe=re.exports,ce=n("9483");Object(ce["a"])("service-worker.js",{ready(){console.log("App is being served from cache by a service worker.")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("Content is updated."),window.location.reload()},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),L["default"].use(B.a),L["default"].use(C.a),L["default"].use(T.a),L["default"].use(E.a),L["default"].use(D.a),L["default"].use(S.a),L["default"].use(O.a),L["default"].use(k.a),L["default"].use(v.a),L["default"].use(w.a),L["default"].use(p.a),L["default"].use(h.a),L["default"].use(f.a),L["default"].use(d.a),L["default"].use(s.a),L["default"].use(c.a),L["default"].prototype.$notify=r.a,L["default"].config.productionTip=!1,new L["default"]({render:e=>e(oe)}).$mount("#app")},"59ae":function(e,t,n){},6:function(e,t){},"85ec":function(e,t,n){},9224:function(e){e.exports=JSON.parse('{"name":"music-decryptor_en","version":"1.5.2","updateInfo":"Support decrypting .efe/.mqcc, and add basic support for decrypting .mflacc0/.mggc1/.mggc0.","license":"MIT","description":"Decrypt encrypted music file in browser.","private":true,"scripts":{"serve":"vue-cli-service serve","build":"vue-cli-service build","fix-compatibility":"node ./src/fix-compatibility.js"},"dependencies":{"base64-js":"^1.3.1","browser-id3-writer":"^4.4.0","core-js":"^3.6.4","crypto-js":"^4.0.0","element-ui":"^2.13.0","iconv-lite":"^0.5.1","music-metadata-browser":"^2.0.5","register-service-worker":"^1.7.1","vue":"^2.6.11"},"devDependencies":{"@vue/cli-plugin-babel":"^4.3.0","@vue/cli-plugin-pwa":"^4.3.0","@vue/cli-service":"^4.3.0","babel-plugin-component":"^1.1.1","vue-cli-plugin-element":"^1.0.1","vue-template-compiler":"^2.6.11","workerize-loader":"^1.2.1"}}')},9603:function(e,t,n){"use strict";n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return f}));n("26e9"),n("fb6a");var a=n("06dc");const r=[79,103,103,83,0,2,0,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,255,255,255,255,1,30,1,118,111,114,98,105,115,0,0,0,0,2,68,172,0,0,0,0,0,0,0,238,2,0,0,0,0,0,184,1,79,103,103,83,0,0,0,0,0,0,0,0,0,0,255,255,255,255,1,0,0,0,255,255,255,255],o=[3,118,111,114,98,105,115,44,0,0,0,88,105,112,104,46,79,114,103,32,108,105,98,86,111,114,98,105,115,32,73,32,50,48,49,53,48,49,48,53,32,40,226,155,132,226,155,132,226,155,132,226,155,132,41,255,0,0,0,255,0,0,0,84,73,84,76,69,61],c=[9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,9,9,9,9,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9,9,9,6,3,3,3,3,6,6,6,6,3,3,3,3,6,6,6,6,6,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,9,9,9,9,0,0,0,0],i=[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,1,3,3,0,1,3,3,3,3,3,3,3,3],s=[222,81,250,195,74,214,202,144,126,103,94,247,213,82,132,216,71,149,187,161,170,198,102,35,146,98,243,116,161,159,244,160,29,63,91,240,19,14,9,61,249,188,0,17];class l{constructor(e,t,n){void 0===t||void 0===n?(44===e.length?(this.Matrix44=e,this.generateMask128from44()):(this.Matrix128=e,this.generateMask44from128()),this.generateMask58from128()):(this.Matrix58=e,this.Super58A=t,this.Super58B=n,this.generateMask128from58(),this.generateMask44from128())}generateMask128from58(){if(56!==this.Matrix58.length)throw"incorrect mask58 matrix length";let e=[];for(let t=0;t<8;t+=1)e=e.concat([this.Super58A],this.Matrix58.slice(7*t,7*t+7),[this.Super58B],this.Matrix58.slice(49-7*t,56-7*t).reverse());this.Matrix128=e}generateMask58from128(){if(128!==this.Matrix128.length)throw"incorrect mask128 length";const e=this.Matrix128[0],t=this.Matrix128[8];let n=[];for(let r=0;r<8;r+=1){let o=16*r,c=120-o;if(this.Matrix128[o]!==e||this.Matrix128[o+8]!==t)throw"decode mask-128 to mask-58 failed";let i=this.Matrix128.slice(o+1,o+8),s=this.Matrix128.slice(c+1,c+8).reverse();if(!Object(a["f"])(i,s))throw"decode mask-128 to mask-58 failed";n=n.concat(i)}this.Matrix58=n,this.Super58A=e,this.Super58B=t}generateMask44from128(){if(128!==this.Matrix128.length)throw"incorrect mask128 matrix length";let e=p();this.Matrix44=[];let t=0;e.forEach(e=>{let n=e.length;for(let t=1;t<n;t++)if(this.Matrix128[e[0]]!==this.Matrix128[e[t]])throw"decode mask-128 to mask-44 failed";this.Matrix44[t]=this.Matrix128[e[0]],t++})}generateMask128from44(){if(44!==this.Matrix44.length)throw"incorrect mask length";this.Matrix128=[];let e=0;p().forEach(t=>{t.forEach(t=>{this.Matrix128[t]=this.Matrix44[e]}),e++})}Decrypt(e){let t=e.slice(0),n=-1,a=-1;for(let r=0;r<e.length;r++)n++,a++,(32768===n||n>32768&&(n+1)%32768===0)&&(n++,a++),a>=128&&(a-=128),t[r]^=this.Matrix128[a];return t}}function d(){return new l(s)}function u(e){let t,n=Math.min(32768,e.length);for(let o=0;o<n;o+=128)try{if(t=new l(e.slice(o,o+128)),Object(a["f"])(a["c"],t.Decrypt(e.slice(0,a["c"].length))))break}catch(r){}return t}function f(e){if(e.length<256)return;let t={};for(let a=0;a<44;a++)t[a]={};const n=e[84]^e[12]^r[12],o=w(n),c=y(n);for(let a=0;a<o.length;a++){if(0===c[a])continue;let n=g(a),r=e[a]^o[a],i=c[a];r in t[n]?t[n][r]+=i:t[n][r]=i}let i=[];try{for(let e=0;e<44;e++)i[e]=m(t[e])}catch(u){return}const s=new l(i);let d=s.Decrypt(e.slice(0,a["g"].length));return Object(a["f"])(a["g"],d)?s:void 0}function m(e){if(0===e.length)throw"can not match at least one key";let t,n=0;for(let a in e)e[a]>n&&(t=a,n=e[a]);return parseInt(t)}const h=[],b=[];function p(){return h}function g(e){return b[e%128]}function w(e){let t=[e,255];for(let n=2;n<e;n++)t.push(255);return t.push(255),r.concat(t,o)}function y(e){let t=[6,0];for(let n=2;n<e;n++)t.push(4);return t.push(0),c.concat(t,i)}(function(){for(let t=0;t<128;t++){let e=(t*t+27)%256;e in h?h[e].push(t):h[e]=[t]}let e=0;h.forEach(t=>{t.forEach(t=>{b[t]=e}),e++})})()},a8ee:function(e,t,n){"use strict";n.r(t),n.d(t,"Decrypt",(function(){return c}));n("e260"),n("ace4"),n("e6cf"),n("5cc6"),n("b39a");var a=n("fd2f"),r=n("06dc");const o=[0,0,0,32,102,116,121,112];async function c(e,t){const n=await Object(r["d"])(e),c=new Uint8Array(n);for(let a=0;a<8;++a)c[a]=o[a];const i=new Blob([c],{type:"audio/mp4"});return await Object(a["Decrypt"])(i,t,"m4a",!1)}},b57b:function(e,t,n){"use strict";n.r(t),n.d(t,"Decrypt",(function(){return s}));n("e260"),n("fb6a"),n("ace4"),n("e6cf"),n("25f0"),n("843c"),n("5cc6"),n("b39a"),n("ddb0"),n("2b3d");var a=n("06dc"),r=n("acf9");const o=n("cb96"),c=[121,101,101,108,105,111,110,45,107,117,119,111,45,116,109,101],i="MoOtOiTvINGwd2E6n0E1i7L5t2IoOoNk";async function s(e,t,n){const i=new Uint8Array(await Object(a["d"])(e));if(!Object(a["f"])(c,i.slice(0,16)))return{status:!1,message:"Invalid kwm file found"};let s=i.slice(24,32),d=l(s),u=i.slice(1024),f=u.length;for(let a=0;a<f;++a)u[a]^=d[a%32];const m=Object(a["b"])(u,"mp3"),h=a["a"][m];let b=new Blob([u],{type:h});const p=await o.parseBlob(b);for(let a in p.native)p.native[a].some(e=>"TCON"===e.id&&"(12)"===e.value)&&(p.common.artist=Object(r["decode"])(p.common.artist,"gbk"),p.common.title=Object(r["decode"])(p.common.title,"gbk"),p.common.album=Object(r["decode"])(p.common.album,"gbk"));const g=Object(a["e"])(p.common.artist,p.common.title,t);return{status:!0,title:g.title,artist:g.artist,ext:m,album:p.common.album,file:URL.createObjectURL(b),mime:h}}function l(e){let t=new DataView(e.buffer),n=t.getBigUint64(0,!0).toString(),a=d(n),r=new Uint8Array(32);for(let o=0;o<32;o++)r[o]=i[o].charCodeAt()^a[o].charCodeAt();return r}function d(e){let t=e.length,n=e;return t>32?n=e.slice(0,32):t<32&&(n=e.padEnd(32,e)),n}},b6cf:function(e,t,n){"use strict";n.r(t),n.d(t,"Decrypt",(function(){return u}));n("e260"),n("fb6a"),n("ace4"),n("e6cf"),n("5cc6"),n("b39a"),n("ddb0"),n("2b3d");var a=n("06dc"),r=n("9603"),o=n("b716");class c{constructor(e){if(0==e.length)throw"invalid key size";this.key=e,this.N=e.length,this.S=new Uint8Array(this.N);for(let n=0;n<this.N;++n)this.S[n]=255&n;let t=0;for(let n=0;n<this.N;++n)t=(this.S[n]+t+this.key[n%this.N])%this.N,[this.S[n],this.S[t]]=[this.S[t],this.S[n]];this.hash=1;for(let n=0;n<this.N;n++){let e=this.key[n];if(!e)continue;const t=this.hash*e>>>0;if(0==t||t<=this.hash)break;this.hash=t}}decrypt(e,t){this.FIRST_SEGMENT_SIZE=128,this.SEGMENT_SIZE=5120;let n=e.length,a=0;const r=e=>(n-=e,a+=e,t+=e,0==n);if(t<this.FIRST_SEGMENT_SIZE){const n=Math.min(e.length,this.FIRST_SEGMENT_SIZE-t);if(this.encFirstSegment(e.subarray(0,n),t),r(n))return}if(t%this.SEGMENT_SIZE!=0){const o=Math.min(this.SEGMENT_SIZE-t%this.SEGMENT_SIZE,n);if(this.encASegment(e.subarray(a,a+o),t),r(o))return}while(n>this.SEGMENT_SIZE)this.encASegment(e.subarray(a,a+this.SEGMENT_SIZE),t),r(this.SEGMENT_SIZE);n>0&&this.encASegment(e.subarray(a),t)}encFirstSegment(e,t){for(let n=0;n<e.length;n++)e[n]^=this.key[this.getSegmentKey(t+n)]}encASegment(e,t){const n=this.S.slice(0),a=t%this.SEGMENT_SIZE+this.getSegmentKey(Math.floor(t/this.SEGMENT_SIZE));let r=0,o=0;for(let c=-a;c<e.length;c++)r=(r+1)%this.N,o=(n[r]+o)%this.N,[n[o],n[r]]=[n[r],n[o]],c>=0&&(e[c]^=n[(n[r]+n[o])%this.N])}getSegmentKey(e){const t=this.key[e%this.N],n=Math.floor(this.hash/((e+1)*t)*100);return n%this.N}}class i{constructor(e){this.keydec=e}Decrypt(e){const t=new c(this.keydec);return t.decrypt(e,0),e}}var s=n("acf9");const l=n("cb96"),d={mgg:{handler:r["b"],ext:"ogg",detect:!0},mflac:{handler:r["a"],ext:"flac",detect:!0},mggl:{handler:r["b"],ext:"ogg",detect:!0},mgg0:{handler:r["b"],ext:"ogg",detect:!0},mgg1:{handler:r["b"],ext:"ogg",detect:!0},mflac0:{handler:r["a"],ext:"flac",detect:!0},mflac1:{handler:r["a"],ext:"flac",detect:!0},qmc0:{handler:r["c"],ext:"mp3",detect:!1},qmc2:{handler:r["c"],ext:"ogg",detect:!1},qmc3:{handler:r["c"],ext:"mp3",detect:!1},qmc8:{handler:r["c"],ext:"m4a",detect:!1},qmcogg:{handler:r["c"],ext:"ogg",detect:!1},qmcflac:{handler:r["c"],ext:"flac",detect:!1},bkcmp3:{handler:r["c"],ext:"mp3",detect:!1},bkcflac:{handler:r["c"],ext:"flac",detect:!1},bkcm4a:{handler:r["c"],ext:"m4a",detect:!1},bkcwav:{handler:r["c"],ext:"wav",detect:!1},bkcogg:{handler:r["c"],ext:"ogg",detect:!1},tkm:{handler:r["c"],ext:"m4a",detect:!1},"666c6163":{handler:r["c"],ext:"flac",detect:!1},"6d7033":{handler:r["c"],ext:"mp3",detect:!1},"6f6767":{handler:r["c"],ext:"ogg",detect:!1},"6d3461":{handler:r["c"],ext:"m4a",detect:!1},776176:{handler:r["c"],ext:"wav",detect:!1}};async function u(e,t,n){if(!(n in d))return{status:!1,message:"Incorrect file type detected"};const r=d[n],c=new Uint8Array(await Object(a["d"])(e));let u,f,m;if(r.detect){const e=[81,84,97,103],t=c.slice(-4);if(Object(a["f"])(e,t)){const e=new DataView(c.slice(c.length-8).buffer).getUint32(0,!1),t=c.length-8-e;u=c.slice(0,t),m=c.slice(t,t+e);const n=",".charCodeAt(0),a=m.findIndex(e=>e==n);let s=m.subarray(0,a);const l=Object(o["a"])(s);f=l.length>300?new i(l):r.handler(u)}else{const e=new DataView(c.slice(c.length-4).buffer).getUint32(0,!0),t=c.length-4-e;u=c.slice(0,t),m=c.slice(t,t+e);const n=Object(o["a"])(m);f=n.length>300?new i(n):r.handler(u)}}else u=c,f=r.handler(u);let h=f.Decrypt(u);const b=Object(a["b"])(h,r.ext),p=a["a"][b];let g=new Blob([h],{type:p});const w=await l.parseBlob(g);for(let a in w.native)w.native[a].some(e=>"TCON"===e.id&&"(12)"===e.value)&&(w.common.artist=Object(s["decode"])(w.common.artist,"gbk"),w.common.title=Object(s["decode"])(w.common.title,"gbk"),w.common.album=Object(s["decode"])(w.common.album,"gbk"));const y=Object(a["e"])(w.common.artist,w.common.title,t);return{status:!0,title:y.title,artist:y.artist,ext:b,album:w.common.album,file:URL.createObjectURL(g),mime:p}}},b716:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r}));n("e260"),n("fb6a"),n("ace4"),n("5cc6"),n("b39a");var a=n("2fd6");function r(t){const n=new TextDecoder,a=e.from(n.decode(t),"base64");let r=a.length;if(r<16)throw"key length is too short";const i=o(106,8);let s=new Uint8Array(16);for(let e=0;e<8;e++)s[e<<1]=i[e],s[1+(e<<1)]=a[e];const l=c(a.subarray(8),s);return a.set(l,8),a.subarray(0,8+l.length)}function o(e,t){const n=[];for(let a=0;a<t;a++){const t=Math.tan(e+.1*a);n[a]=255&100*Math.abs(t)}return n}function c(e,t){if(e.length%8!=0)throw"inBuf size not a multiple of the block size";if(e.length<16)throw"inBuf size too small";const n=new a["a"](t,32),r=new Uint8Array(8),o=new DataView(r.buffer);n.decrypt(o,new DataView(e.buffer,e.byteOffset,8));const c=2,i=7,s=7&r[0],l=e.length-1-s-c-i,d=new Uint8Array(l);let u=new Uint8Array(8),f=e.slice(0,8),m=8,h=1+s;const b=()=>{u=f,f=e.slice(m,m+8);for(let e=0;e<8;e++)r[e]^=f[e];n.decrypt(o,o),m+=8,h=0};for(let a=1;a<=c;)h<8?(h++,a++):b();let p=0;while(p<l)h<8?(d[p]=r[h]^u[h],p++,h++):b();for(let a=1;a<=i;a++)if(r[h]!=u[h])throw"zero check failed";return d}}).call(this,n("1c35").Buffer)},bd2e:function(e,t,n){"use strict";n.r(t),n.d(t,"CommonDecrypt",(function(){return f}));n("baa5"),n("e6cf");const a=n("dde9"),r=n("b57b"),o=n("002f"),c=n("b6cf"),i=n("dd48"),s=n("d776"),l=n("fd2f"),d=n("a8ee"),u=n("282c");async function f(e){let t,n=e.name.substring(e.name.lastIndexOf(".")+1,e.name.length).toLowerCase(),f=e.name.substring(0,e.name.lastIndexOf("."));switch(n){case"ncm":t=await a.Decrypt(e.raw,f,n);break;case"uc":case"uc!":t=await u.Decrypt(e.raw,f,n);break;case"kwm":t=await r.Decrypt(e.raw,f,n);break;case"xm":case"wav":case"mp3":case"flac":case"m4a":t=await o.Decrypt(e.raw,f,n);break;case"ogg":case"mqcc":t=await l.Decrypt(e.raw,f,n);break;case"tm0":case"tm3":t=await l.Decrypt(e.raw,f,"mp3");break;case"efe":t=await i.Decrypt(e.raw,f,n);break;case"mflacc0":case"mggc1":case"mggc0":t=await s.Decrypt(e.raw,f,n);break;case"qmc0":case"qmc2":case"qmc3":case"qmc8":case"qmcflac":case"qmcogg":case"tkm":case"bkcmp3":case"bkcflac":case"bkcm4a":case"bkcwav":case"bkcogg":case"mflac":case"mgg":case"mflac0":case"mflac1":case"mgg1":case"mgg0":case"mggl":case"666c6163":case"6d7033":case"6f6767":case"6d3461":case"776176":t=await c.Decrypt(e.raw,f,n);break;case"tm2":case"tm6":t=await d.Decrypt(e.raw,f);break;default:t={status:!1,message:"Unsupported file type found"}}return t.rawExt||(t.rawExt=n),t.rawFilename||(t.rawFilename=f),t}},bfa2:function(e,t,n){var a=n("3d67"),r=["CommonDecrypt"];e.exports=function(){var e=new Worker(n.p+"d2602ecc29b0fa2ca12e.worker.js",{name:"[hash].worker.js"});return a(e,r),e}},d776:function(e,t,n){"use strict";n.r(t),n.d(t,"Decrypt",(function(){return s}));n("e260"),n("ace4"),n("e6cf"),n("5cc6"),n("b39a"),n("ddb0"),n("2b3d");var a=n("06dc"),r=n("9603"),o=n("acf9");const c=n("cb96"),i={mflacc0:{handler:r["a"],ext:"flac"},mggc1:{handler:r["b"],ext:"ogg"},mggc0:{handler:r["b"],ext:"ogg"}};async function s(e,t,n){if(!(n in i))return{status:!1,message:"Incorrect file type found"};const r=i[n],s=new Uint8Array(await Object(a["d"])(e));let l=s,d=r.handler(l);if(void 0===d)return{status:!1,message:"Unsupported type of "+n+" file detected"};let u=d.Decrypt(l);const f=Object(a["b"])(u,r.ext),m=a["a"][f];let h=new Blob([u],{type:m});const b=await c.parseBlob(h);for(let a in b.native)b.native[a].some(e=>"TCON"===e.id&&"(12)"===e.value)&&(b.common.artist=Object(o["decode"])(b.common.artist,"gbk"),b.common.title=Object(o["decode"])(b.common.title,"gbk"),b.common.album=Object(o["decode"])(b.common.album,"gbk"));const p=Object(a["e"])(b.common.artist,b.common.title,t);return{status:!0,title:p.title,artist:p.artist,ext:f,album:b.common.album,file:URL.createObjectURL(h),mime:m}}},dd48:function(e,t,n){"use strict";n.r(t),n.d(t,"Decrypt",(function(){return c}));n("e260"),n("fb6a"),n("ace4"),n("e6cf"),n("5cc6"),n("b39a"),n("ddb0"),n("2b3d");var a=n("06dc"),r=n("acf9");const o=n("cb96");async function c(e,t,n){const c=new Uint8Array(await Object(a["d"])(e));let l=i(c);void 0===l&&(l=s(c));let d=Math.min(5324800,c.length);for(let a=0;a<d;a++)c[a]^=l[a%64];const u=Object(a["b"])(c,"mp3");e=new Blob([c],{type:a["a"][u]});const f=await o.parseBlob(e);for(let a in f.native)f.native[a].some(e=>"TCON"===e.id&&"(12)"===e.value)&&(f.common.artist=Object(r["decode"])(f.common.artist,"gbk"),f.common.title=Object(r["decode"])(f.common.title,"gbk"),f.common.album=Object(r["decode"])(f.common.album,"gbk"));const m=Object(a["e"])(f.common.artist,f.common.title,t);return{status:!0,title:m.title,artist:m.artist,ext:u,album:f.common.album,file:URL.createObjectURL(e),mime:a["a"][u]}}function i(e){let t,n,r=Math.min(32768,e.length);for(let c=0;c<r;c+=128)try{t=e.slice(c,c+128);const r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];if(Object(a["f"])(t.slice(0,64),t.slice(64))&&Object(a["f"])(r,t.slice(32,64))&&Object(a["f"])(r,t.slice(96))){n=t.slice(64);break}}catch(o){}return n}function s(e){const t=e.slice(128,144),n=e.slice(16,32),a=e.slice(80,96),r=e.slice(144,160),o=e.slice(208,224),c=e.slice(272,288),i=e.slice(336,352),s=e.slice(400,416),l=e.slice(464,480),d=e.slice(528,544),u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let f,m=[],h=[];for(let p=0;p<n.length;p++){f=[n[p],a[p],r[p],o[p],c[p],i[p],s[p],l[p],d[p]];let e,u={};for(let t=0;t<f.length;t++)e=f[t],u[e]?u[e]++:u[e]=1;let b=0,g={};for(e in u)b<u[e]&&(b=u[e],g=e);let w=Number(g);h.push(w),m.push(t[p])}let b=m.concat(h,u);return b}},dde9:function(e,t,n){"use strict";n.r(t),n.d(t,"Decrypt",(function(){return s}));n("c975"),n("e260"),n("fb6a"),n("ace4"),n("e6cf"),n("25f0"),n("5cc6"),n("b39a"),n("ddb0"),n("2b3d");var a=n("06dc");const r=n("3452"),o=r.enc.Hex.parse("687a4852416d736f356b496e62617857"),c=r.enc.Hex.parse("2331346C6A6B5F215C5D2630553C2728"),i=[67,84,69,78,70,68,65,77];async function s(e,t,n){const r=await Object(a["d"])(e),o=new DataView(r);if(!Object(a["f"])(i,new Uint8Array(r,0,8)))return{status:!1,message:"Invalid ncm file found"};const c=l(o,r,10),s=d(c.data),f=u(o,r,c.offset),m=f.data;let h=f.offset+o.getUint32(f.offset+5,!0)+13,b=new Uint8Array(r,h),p=b.length;for(let a=0;a<p;++a)b[a]^=s[255&a];void 0===m.album&&(m.album="");const g=[];m.artist&&m.artist.forEach(e=>g.push(e[0]));const w=Object(a["e"])(g.join(" & "),m.musicName,t);0===g.length&&g.push(w.artist),void 0===m.format&&(m.format=Object(a["b"])(b,"mp3")),"mp3"===m.format&&(b=await Object(a["h"])(b,g,w.title,m.album));const y=a["a"][m.format],v=new Blob([b],{type:y});return{status:!0,title:w.title,artist:w.artist,ext:m.format,album:m.album,file:URL.createObjectURL(v),mime:y}}function l(e,t,n){const a=e.getUint32(n,!0);n+=4;const c=new Uint8Array(t,n,a).map(e=>100^e);n+=a;const i=r.AES.decrypt({ciphertext:r.lib.WordArray.create(c)},o,{mode:r.mode.ECB,padding:r.pad.Pkcs7}),s=new Uint8Array(i.sigBytes),l=i.words,d=i.sigBytes;for(let r=0;r<d;r++)s[r]=l[r>>>2]>>>24-r%4*8&255;return{offset:n,data:s.slice(17)}}function d(e){const t=new Uint8Array(Array(256).keys()),n=e.length;let a=0;for(let r=0;r<256;r++)a=t[r]+a+e[r%n]&255,[t[r],t[a]]=[t[a],t[r]];return t.map((e,t,n)=>{t=t+1&255;const a=n[t],r=n[t+a&255];return n[a+r&255]})}function u(e,t,n){const a=e.getUint32(n,!0);if(n+=4,0===a)return{data:{},offset:n};const o=new Uint8Array(t,n,a).map(e=>99^e);n+=a;const i=r.AES.decrypt({ciphertext:r.enc.Base64.parse(r.lib.WordArray.create(o.slice(22)).toString(r.enc.Utf8))},c,{mode:r.mode.ECB,padding:r.pad.Pkcs7}).toString(r.enc.Utf8),s=i.indexOf(":");let l=JSON.parse(i.slice(s+1));return"dj"===i.slice(0,s)&&(l=l.mainMusic),{data:l,offset:n}}},f696:function(e,t,n){"use strict";var a=n("59ae"),r=n.n(a);r.a},fd2f:function(e,t,n){"use strict";n.r(t),n.d(t,"Decrypt",(function(){return c}));n("e260"),n("ace4"),n("e6cf"),n("5cc6"),n("b39a"),n("ddb0"),n("2b3d");var a=n("06dc"),r=n("acf9");const o=n("cb96");async function c(e,t,n,c=!0){let i=n;if(c){const t=new Uint8Array(await Object(a["d"])(e));i=Object(a["b"])(t,n),i!==n&&(e=new Blob([t],{type:a["a"][i]}))}const s=await o.parseBlob(e);for(let a in s.native)s.native[a].some(e=>"TCON"===e.id&&"(12)"===e.value)&&(s.common.artist=Object(r["decode"])(s.common.artist,"gbk"),s.common.title=Object(r["decode"])(s.common.title,"gbk"),s.common.album=Object(r["decode"])(s.common.album,"gbk"));const l=Object(a["e"])(s.common.artist,s.common.title,t);return{status:!0,title:l.title,artist:l.artist,ext:i,album:s.common.album,file:URL.createObjectURL(e),mime:a["a"][i]}}}});