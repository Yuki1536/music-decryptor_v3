(function(e){function t(t){for(var r,c,s=t[0],i=t[1],l=t[2],d=0,u=[];d<s.length;d++)c=s[d],Object.prototype.hasOwnProperty.call(n,c)&&n[c]&&u.push(n[c][0]),n[c]=0;for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);_&&_(t);while(u.length)u.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],r=!0,s=1;s<a.length;s++){var i=a[s];0!==n[i]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=a[0]))}return e}var r={},n={app:0},o=[];function c(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=e,c.c=r,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(a,r,function(t){return e[t]}.bind(null,r));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],i=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var _=i;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"002f":function(e,t,a){"use strict";a.r(t),a.d(t,"Decrypt",(function(){return l}));a("e260"),a("fb6a"),a("ace4"),a("e6cf"),a("5cc6"),a("b39a"),a("ddb0"),a("2b3d");var r=a("06dc"),n=a("fd2f");const o=a("cb96"),c=[105,102,109,116],s=[254,254,254,254],i={" WAV":".wav",FLAC:".flac"," MP3":".mp3"," A4M":".m4a"};async function l(e,t,a){const l=new Uint8Array(await Object(r["d"])(e));if(!Object(r["f"])(c,l.slice(0,4))||!Object(r["f"])(s,l.slice(8,12)))return"xm"===a?{status:!1,message:"此xm文件已损坏"}:await Object(n["Decrypt"])(e,t,a,!0);let _=(new TextDecoder).decode(l.slice(4,8));if(!i.hasOwnProperty(_))return{status:!1,message:"未知的xm文件类型"};let d=l[15],u=l[12]|l[13]<<8|l[14]<<16,m=l.slice(16),f=m.length;for(let r=u;r<f;++r)m[r]=m[r]-d^255;const h=Object(r["b"])(m,"mp3"),b=r["a"][h];let p=new Blob([m],{type:b});const g=await o.parseBlob(p);"wav"===h&&(g.common.album="",g.common.artist="",g.common.title="");const w=Object(r["e"])(g.common.artist,g.common.title,t,"_");return{status:!0,title:w.title,artist:w.artist,ext:h,album:g.common.album,file:URL.createObjectURL(p),mime:b,rawExt:"xm"}}},"034f":function(e,t,a){"use strict";var r=a("85ec"),n=a.n(r);n.a},"06dc":function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"g",(function(){return c})),a.d(t,"a",(function(){return _})),a.d(t,"d",(function(){return d})),a.d(t,"e",(function(){return u})),a.d(t,"f",(function(){return m})),a.d(t,"b",(function(){return f})),a.d(t,"h",(function(){return h}));a("fb6a"),a("e6cf"),a("1276"),a("498a");const r=a("7907"),n=[102,76,97,67],o=[73,68,51],c=[79,103,103,83],s=[102,116,121,112],i=[48,38,178,117,142,102,207,17,166,217,0,170,0,98,206,108],l=[82,73,70,70],_={mp3:"audio/mpeg",flac:"audio/flac",m4a:"audio/mp4",ogg:"audio/ogg",wma:"audio/x-ms-wma",wav:"audio/x-wav"};async function d(e){return await new Promise(t=>{const a=new FileReader;a.onload=e=>{t(e.target.result)},a.readAsArrayBuffer(e)})}function u(e,t,a,r="-"){let n="",o="",c=a.split(r);return c.length>1?(n=c[0].trim(),o=c[1].trim()):1===c.length&&(o=c[0].trim()),"string"==typeof e&&""!==e&&(n=e),"string"==typeof t&&""!==t&&(o=t),{artist:n,title:o}}function m(e,t){return e.every((e,a)=>e===t[a])}function f(e,t){return m(o,e.slice(0,o.length))?"mp3":m(n,e.slice(0,n.length))?"flac":m(c,e.slice(0,c.length))?"ogg":m(s,e.slice(4,4+s.length))?"m4a":m(i,e.slice(0,i.length))?"wma":m(l,e.slice(0,l.length))?"wav":t}async function h(e,t,a,n){const o=new r(e);return o.setFrame("TPE1",t).setFrame("TIT2",a).setFrame("TALB",n),o.addTag(),o.arrayBuffer}},1:function(e,t){},2:function(e,t){},"282c":function(e,t,a){"use strict";a.r(t),a.d(t,"Decrypt",(function(){return c}));a("e260"),a("ace4"),a("e6cf"),a("5cc6"),a("b39a"),a("ddb0"),a("2b3d");var r=a("06dc"),n=a("acf9");const o=a("cb96");async function c(e,t,a){const c=new Uint8Array(await Object(r["d"])(e));let s=c.length;for(let r=0;r<s;r++)c[r]^=163;const i=Object(r["b"])(c,"mp3");e=new Blob([c],{type:r["a"][i]});const l=await o.parseBlob(e);for(let r in l.native)l.native[r].some(e=>"TCON"===e.id&&"(12)"===e.value)&&(l.common.artist=Object(n["decode"])(l.common.artist,"gbk"),l.common.title=Object(n["decode"])(l.common.title,"gbk"),l.common.album=Object(n["decode"])(l.common.album,"gbk"));const _=Object(r["e"])(l.common.artist,l.common.title,t);return{status:!0,title:_.title,artist:_.artist,ext:i,album:l.common.album,file:URL.createObjectURL(e),mime:r["a"][i]}}},"2dfe":function(e,t,a){},"2fd6":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));a("ace4");class r{constructor(e,t=64){if(16!=e.length)throw"incorrect key size";if(0!=(1&t))throw"odd number of rounds specified";this.delta=2654435769;const a=new DataView(e.buffer);this.k0=a.getUint32(0,!1),this.k1=a.getUint32(4,!1),this.k2=a.getUint32(8,!1),this.k3=a.getUint32(12,!1),this.rounds=t}encrypt(e,t){let a=t.getUint32(0,!1),r=t.getUint32(4,!1),n=0;for(let o=0;o<this.rounds/2;o++)n+=this.delta,a+=(r<<4)+this.k0^r+n^(r>>>5)+this.k1,r+=(a<<4)+this.k2^a+n^(a>>>5)+this.k3;e.setUint32(0,a,!1),e.setUint32(4,r,!1)}decrypt(e,t){let a=t.getUint32(0,!1),r=t.getUint32(4,!1),n=this.delta*this.rounds/2;for(let o=0;o<this.rounds/2;o++)r-=(a<<4)+this.k2^a+n^(a>>>5)+this.k3,a-=(r<<4)+this.k0^r+n^(r>>>5)+this.k1,n-=this.delta;e.setUint32(0,a,!1),e.setUint32(4,r,!1)}}},3:function(e,t){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,a){"use strict";a.r(t);a("46a1"),a("450d");var r=a("e5f2"),n=a.n(r),o=(a("6b30"),a("c284")),c=a.n(o),s=(a("0c67"),a("299c")),i=a.n(s),l=(a("b5d8"),a("f494")),_=a.n(l),d=(a("560b"),a("dcdc")),u=a.n(d),m=(a("f225"),a("89a9")),f=a.n(m),h=(a("f4f9"),a("c2cc")),b=a.n(h),p=(a("7a0f"),a("0f6c")),g=a.n(p),w=(a("aaa5"),a("a578")),y=a.n(w),k=(a("adec"),a("3d2d")),E=a.n(k),O=(a("bdc7"),a("aa2f")),v=a.n(O),M=(a("de31"),a("c69e")),D=a.n(M),x=(a("5466"),a("ecdf")),j=a.n(x),U=(a("38a0"),a("ad41")),P=a.n(U),A=(a("1951"),a("eedf")),S=a.n(A),T=(a("acb6"),a("c673")),C=a.n(T),B=(a("fd71"),a("a447")),I=a.n(B),L=a("2b0e"),R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{attrs:{id:"app"}},[a("el-main",[a("x-upload",{on:{handle_error:e.showFail,handle_finish:e.showSuccess}}),a("div",{attrs:{id:"app-control"}},[a("el-row",{staticStyle:{"padding-bottom":"1em","font-size":"14px"}},[e._v(" 歌曲命名格式： "),a("el-radio",{attrs:{label:"1",name:"format"},model:{value:e.download_format,callback:function(t){e.download_format=t},expression:"download_format"}},[e._v("同原文件名")]),a("el-radio",{attrs:{label:"2",name:"format"},model:{value:e.download_format,callback:function(t){e.download_format=t},expression:"download_format"}},[e._v("歌手-歌曲名")]),a("el-radio",{attrs:{label:"3",name:"format"},model:{value:e.download_format,callback:function(t){e.download_format=t},expression:"download_format"}},[e._v("歌曲名")]),a("el-radio",{attrs:{label:"4",name:"format"},model:{value:e.download_format,callback:function(t){e.download_format=t},expression:"download_format"}},[e._v("歌曲名-歌手")])],1),a("el-row",[a("el-button",{attrs:{icon:"el-icon-download",plain:""},on:{click:e.handleDownloadAll}},[e._v("下载全部")]),a("el-button",{attrs:{icon:"el-icon-delete",plain:"",type:"danger"},on:{click:e.handleDeleteAll}},[e._v("清除全部")]),a("el-checkbox",{staticStyle:{"margin-left":"1em"},attrs:{border:""},model:{value:e.single_loop,callback:function(t){e.single_loop=t},expression:"single_loop"}},[e._v("单曲循环")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(" 当您使用此工具进行大量文件解密的时候，建议开启此选项。"),a("br"),e._v(" 开启后，解密结果将不会存留于浏览器中，防止内存不足。 ")]),a("el-checkbox",{staticStyle:{"margin-left":"-1.4em"},attrs:{border:""},model:{value:e.instant_download,callback:function(t){e.instant_download=t},expression:"instant_download"}},[e._v("立即保存")])],1)],1)],1),a("audio",{attrs:{autoplay:e.playing_auto,src:e.playing_url,loop:e.single_loop,controlslist:"nodownload",controls:""}}),a("x-preview",{attrs:{download_format:e.download_format,"table-data":e.tableData},on:{music_changed:e.changePlaying}})],1),a("el-footer",{attrs:{id:"app-footer"}},[a("el-row",[a("a",{attrs:{target:"_blank"}},[e._v("音乐文件解密")]),e._v("(v"),a("span",{domProps:{textContent:e._s(e.version)}}),e._v(")：移除已购音乐的加密保护。 ")]),a("el-row",[e._v(" 目前支持网易云音乐(ncm), QQ音乐(qmcflac, qmc, mflac, mgg), 虾米音乐(xm), 酷我音乐(kwm)等。 ")]),a("el-row",[e._v(" Select Language: "),a("a",{attrs:{target:"_self"}},[e._v("中文 (简体) ")]),e._v(" "),a("a",{attrs:{href:"./en/",target:"_self"}},[e._v(" English")])]),a("el-row",[e._v(" 音乐解密程序使用 MIT许可协议 开放源代码。 ")])],1)],1)},W=[],K=(a("e6cf"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-upload",{attrs:{"auto-upload":!1,"on-change":e.handleFile,"show-file-list":!1,action:"",drag:"",multiple:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击选择")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("此程序仅在浏览器内对文件进行解密，无需网络连接。")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("当前线程数: "),a("span",{domProps:{textContent:e._s(e.thread_num)}})]),a("transition",{attrs:{name:"el-fade-in"}},[a("el-progress",{directives:[{name:"show",rawName:"v-show",value:e.progress_show,expression:"progress_show"}],staticStyle:{margin:"16px 6px 0 6px"},attrs:{format:e.progressFormat,percentage:e.progress_percent,"stroke-width":16,"text-inside":!0}})],1)],1)}),q=[],N={name:"upload",data(){return{cacheQueue:[],workers:[],idle_workers:[],thread_num:1,progress_show:!1,progress_finished:0,progress_all:0,progress_percent:0}},mounted(){if(navigator.hardwareConcurrency>1&&"https:"===document.location.protocol){const e=a("bfa2");this.thread_num=navigator.hardwareConcurrency;for(let t=0;t<this.thread_num;t++)this.workers.push(e().CommonDecrypt),this.idle_workers.push(t)}else{const e=a("bd2e");this.workers.push(e.CommonDecrypt),this.idle_workers.push(0)}},methods:{progressFormat(){return this.progress_finished+"/"+this.progress_all},progressChange(e,t){this.progress_all+=t,this.progress_finished+=e,this.progress_percent=Math.round(this.progress_finished/this.progress_all*100),this.progress_finished===this.progress_all?setTimeout(()=>{this.progress_show=!1,this.progress_finished=0,this.progress_all=0},3e3):this.progress_show=!0},handleFile(e){this.progressChange(0,1),this.idle_workers.length>0?this.handleDoFile(e,this.idle_workers.shift()):this.cacheQueue.push(e)},handleCacheQueue(e){0!==this.cacheQueue.length?this.handleDoFile(this.cacheQueue.shift(),e):this.idle_workers.push(e)},handleDoFile(e,t){this.workers[t](e).then(e=>{this.$emit("handle_finish",e),this.handleCacheQueue(t),this.progressChange(1,0)}).catch(a=>{this.$emit("handle_error",a,e.name),this.handleCacheQueue(t),this.progressChange(1,0)})}}},F=N,$=(a("fa6ff"),a("2877")),G=Object($["a"])(F,K,q,!1,null,"3eed55ca",null),Q=G.exports,Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{label:"封面"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"image-slot el-image__error",staticStyle:{width:"100px",height:"100px"}},[e._v(" 暂无封面 ")])]}}])}),a("el-table-column",{attrs:{label:"歌曲名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.title))])]}}])}),a("el-table-column",{attrs:{label:"歌手"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.artist))])]}}])}),a("el-table-column",{attrs:{label:"专辑"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.album))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{circle:"",icon:"el-icon-video-play",type:"success"},on:{click:function(a){return e.handlePlay(t.$index,t.row)}}}),a("el-button",{attrs:{circle:"",icon:"el-icon-download"},on:{click:function(a){return e.handleDownload(t.row)}}}),a("el-button",{attrs:{circle:"",icon:"el-icon-delete",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}})]}}])})],1)},z=[];a("a434"),a("e260"),a("ddb0"),a("2b3d");function V(e,t){const a=document.createElement("a");switch(a.href=e.file,t){default:case"1":a.download=e.rawFilename+"."+e.ext;break;case"2":a.download=e.artist+"-"+e.title+"."+e.ext;break;case"3":a.download=e.title+"."+e.ext;break;case"4":a.download=e.title+"-"+e.artist+"."+e.ext;break}document.body.append(a),a.click(),a.remove()}function H(e){URL.revokeObjectURL(e.file)}var J={name:"preview",props:{tableData:{type:Array,required:!0},download_format:{type:String,required:!0}},methods:{handlePlay(e,t){this.$emit("music_changed",t.file)},handleDelete(e,t){H(t),this.tableData.splice(e,1)},handleDownload(e){V(e,this.download_format)}}},X=J,Y=Object($["a"])(X,Z,z,!1,null,"2c426aa2",null),ee=Y.exports,te=a("9224"),ae={name:"app",components:{xUpload:Q,xPreview:ee},data(){return{version:te.version,activeIndex:"1",tableData:[],playing_url:"",playing_auto:!1,single_loop:!1,download_format:"1",instant_download:!1}},created(){this.$nextTick((function(){this.finishLoad()}))},methods:{async finishLoad(){const e=document.getElementById("loader-mask");e.remove(),this.$notify.info({title:"离线使用",message:"我们使用PWA技术，无网络也能使用<br/>最近更新："+te.updateInfo,dangerouslyUseHTMLString:!0,duration:1e4,position:"top-left"})},showSuccess(e){e.status?this.instant_download?(V(e,this.download_format),H(e)):(this.tableData.push(e),this.$notify.success({title:"解密成功",message:"成功解密 "+e.title,duration:3e3})):this.showFail(e.message,e.rawFilename+"."+e.rawExt)},showFail(e,t){this.$notify.error({title:"出现问题",message:e+"，"+t,dangerouslyUseHTMLString:!0,duration:6e3})},changePlaying(e){this.playing_url=e,this.playing_auto=!0},handleDeleteAll(){this.tableData.forEach(e=>{H(e)}),this.tableData=[]},handleDownloadAll(){let e=0,t=setInterval(()=>{e<this.tableData.length?(V(this.tableData[e],this.download_format),e++):clearInterval(t)},300)},setLoopAudio(){this.single_loop?this.single_loop=!1:this.single_loop=!0}}},re=ae,ne=(a("034f"),Object($["a"])(re,R,W,!1,null,null,null)),oe=ne.exports,ce=a("9483");Object(ce["a"])("service-worker.js",{ready(){console.log("程序已就绪。")},registered(){console.log("Service Worker启动成功。")},cached(){console.log("程序已做好离线使用前的准备工作。")},updatefound(){console.log("正在下载内容...")},updated(){console.log("内容更新成功!"),window.location.reload()},offline(){console.log("无可用网络连接，进入离线模式。")},error(e){console.error("Service Worker启动失败，错误信息: ",e)}}),L["default"].use(I.a),L["default"].use(C.a),L["default"].use(S.a),L["default"].use(P.a),L["default"].use(j.a),L["default"].use(D.a),L["default"].use(v.a),L["default"].use(E.a),L["default"].use(y.a),L["default"].use(g.a),L["default"].use(b.a),L["default"].use(f.a),L["default"].use(u.a),L["default"].use(_.a),L["default"].use(i.a),L["default"].use(c.a),L["default"].prototype.$notify=n.a,L["default"].config.productionTip=!1,new L["default"]({render:e=>e(oe)}).$mount("#app")},6:function(e,t){},"85ec":function(e,t,a){},9224:function(e){e.exports=JSON.parse('{"name":"music-decryptor","version":"1.5.2","updateInfo":"支持.efe/.mqcc解密，实验性支持.mflacc0/.mggc1/.mggc0解密","license":"MIT","description":"在任何设备上解密已购的加密音乐文件！","private":true,"scripts":{"serve":"vue-cli-service serve","build":"vue-cli-service build","fix-compatibility":"node ./src/fix-compatibility.js"},"dependencies":{"base64-js":"^1.3.1","browser-id3-writer":"^4.4.0","core-js":"^3.6.4","crypto-js":"^4.0.0","element-ui":"^2.13.0","iconv-lite":"^0.5.1","music-metadata-browser":"^2.0.5","register-service-worker":"^1.7.1","vue":"^2.6.11"},"devDependencies":{"@vue/cli-plugin-babel":"^4.3.0","@vue/cli-plugin-pwa":"^4.3.0","@vue/cli-service":"^4.3.0","babel-plugin-component":"^1.1.1","vue-cli-plugin-element":"^1.0.1","vue-template-compiler":"^2.6.11","workerize-loader":"^1.2.1"}}')},9603:function(e,t,a){"use strict";a.d(t,"c",(function(){return _})),a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return u}));a("26e9"),a("fb6a");var r=a("06dc");const n=[79,103,103,83,0,2,0,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,255,255,255,255,1,30,1,118,111,114,98,105,115,0,0,0,0,2,68,172,0,0,0,0,0,0,0,238,2,0,0,0,0,0,184,1,79,103,103,83,0,0,0,0,0,0,0,0,0,0,255,255,255,255,1,0,0,0,255,255,255,255],o=[3,118,111,114,98,105,115,44,0,0,0,88,105,112,104,46,79,114,103,32,108,105,98,86,111,114,98,105,115,32,73,32,50,48,49,53,48,49,48,53,32,40,226,155,132,226,155,132,226,155,132,226,155,132,41,255,0,0,0,255,0,0,0,84,73,84,76,69,61],c=[9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,9,9,9,9,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9,9,9,6,3,3,3,3,6,6,6,6,3,3,3,3,6,6,6,6,6,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,9,9,9,9,0,0,0,0],s=[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,1,3,3,0,1,3,3,3,3,3,3,3,3],i=[222,81,250,195,74,214,202,144,126,103,94,247,213,82,132,216,71,149,187,161,170,198,102,35,146,98,243,116,161,159,244,160,29,63,91,240,19,14,9,61,249,188,0,17];class l{constructor(e,t,a){void 0===t||void 0===a?(44===e.length?(this.Matrix44=e,this.generateMask128from44()):(this.Matrix128=e,this.generateMask44from128()),this.generateMask58from128()):(this.Matrix58=e,this.Super58A=t,this.Super58B=a,this.generateMask128from58(),this.generateMask44from128())}generateMask128from58(){if(56!==this.Matrix58.length)throw"incorrect mask58 matrix length";let e=[];for(let t=0;t<8;t+=1)e=e.concat([this.Super58A],this.Matrix58.slice(7*t,7*t+7),[this.Super58B],this.Matrix58.slice(49-7*t,56-7*t).reverse());this.Matrix128=e}generateMask58from128(){if(128!==this.Matrix128.length)throw"incorrect mask128 length";const e=this.Matrix128[0],t=this.Matrix128[8];let a=[];for(let n=0;n<8;n+=1){let o=16*n,c=120-o;if(this.Matrix128[o]!==e||this.Matrix128[o+8]!==t)throw"decode mask-128 to mask-58 failed";let s=this.Matrix128.slice(o+1,o+8),i=this.Matrix128.slice(c+1,c+8).reverse();if(!Object(r["f"])(s,i))throw"decode mask-128 to mask-58 failed";a=a.concat(s)}this.Matrix58=a,this.Super58A=e,this.Super58B=t}generateMask44from128(){if(128!==this.Matrix128.length)throw"incorrect mask128 matrix length";let e=b();this.Matrix44=[];let t=0;e.forEach(e=>{let a=e.length;for(let t=1;t<a;t++)if(this.Matrix128[e[0]]!==this.Matrix128[e[t]])throw"decode mask-128 to mask-44 failed";this.Matrix44[t]=this.Matrix128[e[0]],t++})}generateMask128from44(){if(44!==this.Matrix44.length)throw"incorrect mask length";this.Matrix128=[];let e=0;b().forEach(t=>{t.forEach(t=>{this.Matrix128[t]=this.Matrix44[e]}),e++})}Decrypt(e){let t=e.slice(0),a=-1,r=-1;for(let n=0;n<e.length;n++)a++,r++,(32768===a||a>32768&&(a+1)%32768===0)&&(a++,r++),r>=128&&(r-=128),t[n]^=this.Matrix128[r];return t}}function _(){return new l(i)}function d(e){let t,a=Math.min(32768,e.length);for(let o=0;o<a;o+=128)try{if(t=new l(e.slice(o,o+128)),Object(r["f"])(r["c"],t.Decrypt(e.slice(0,r["c"].length))))break}catch(n){}return t}function u(e){if(e.length<256)return;let t={};for(let r=0;r<44;r++)t[r]={};const a=e[84]^e[12]^n[12],o=g(a),c=w(a);for(let r=0;r<o.length;r++){if(0===c[r])continue;let a=p(r),n=e[r]^o[r],s=c[r];n in t[a]?t[a][n]+=s:t[a][n]=s}let s=[];try{for(let e=0;e<44;e++)s[e]=m(t[e])}catch(d){return}const i=new l(s);let _=i.Decrypt(e.slice(0,r["g"].length));return Object(r["f"])(r["g"],_)?i:void 0}function m(e){if(0===e.length)throw"can not match at least one key";let t,a=0;for(let r in e)e[r]>a&&(t=r,a=e[r]);return parseInt(t)}const f=[],h=[];function b(){return f}function p(e){return h[e%128]}function g(e){let t=[e,255];for(let a=2;a<e;a++)t.push(255);return t.push(255),n.concat(t,o)}function w(e){let t=[6,0];for(let a=2;a<e;a++)t.push(4);return t.push(0),c.concat(t,s)}(function(){for(let t=0;t<128;t++){let e=(t*t+27)%256;e in f?f[e].push(t):f[e]=[t]}let e=0;f.forEach(t=>{t.forEach(t=>{h[t]=e}),e++})})()},a8ee:function(e,t,a){"use strict";a.r(t),a.d(t,"Decrypt",(function(){return c}));a("e260"),a("ace4"),a("e6cf"),a("5cc6"),a("b39a");var r=a("fd2f"),n=a("06dc");const o=[0,0,0,32,102,116,121,112];async function c(e,t){const a=await Object(n["d"])(e),c=new Uint8Array(a);for(let r=0;r<8;++r)c[r]=o[r];const s=new Blob([c],{type:"audio/mp4"});return await Object(r["Decrypt"])(s,t,"m4a",!1)}},b57b:function(e,t,a){"use strict";a.r(t),a.d(t,"Decrypt",(function(){return i}));a("e260"),a("fb6a"),a("ace4"),a("e6cf"),a("25f0"),a("843c"),a("5cc6"),a("b39a"),a("ddb0"),a("2b3d");var r=a("06dc"),n=a("acf9");const o=a("cb96"),c=[121,101,101,108,105,111,110,45,107,117,119,111,45,116,109,101],s="MoOtOiTvINGwd2E6n0E1i7L5t2IoOoNk";async function i(e,t,a){const s=new Uint8Array(await Object(r["d"])(e));if(!Object(r["f"])(c,s.slice(0,16)))return{status:!1,message:"此kwm文件已损坏"};let i=s.slice(24,32),_=l(i),d=s.slice(1024),u=d.length;for(let r=0;r<u;++r)d[r]^=_[r%32];const m=Object(r["b"])(d,"mp3"),f=r["a"][m];let h=new Blob([d],{type:f});const b=await o.parseBlob(h);for(let r in b.native)b.native[r].some(e=>"TCON"===e.id&&"(12)"===e.value)&&(b.common.artist=Object(n["decode"])(b.common.artist,"gbk"),b.common.title=Object(n["decode"])(b.common.title,"gbk"),b.common.album=Object(n["decode"])(b.common.album,"gbk"));const p=Object(r["e"])(b.common.artist,b.common.title,t);return{status:!0,title:p.title,artist:p.artist,ext:m,album:b.common.album,file:URL.createObjectURL(h),mime:f}}function l(e){let t=new DataView(e.buffer),a=t.getBigUint64(0,!0).toString(),r=_(a),n=new Uint8Array(32);for(let o=0;o<32;o++)n[o]=s[o].charCodeAt()^r[o].charCodeAt();return n}function _(e){let t=e.length,a=e;return t>32?a=e.slice(0,32):t<32&&(a=e.padEnd(32,e)),a}},b6cf:function(e,t,a){"use strict";a.r(t),a.d(t,"Decrypt",(function(){return d}));a("e260"),a("fb6a"),a("ace4"),a("e6cf"),a("5cc6"),a("b39a"),a("ddb0"),a("2b3d");var r=a("06dc"),n=a("9603"),o=a("b716");class c{constructor(e){if(0==e.length)throw"invalid key size";this.key=e,this.N=e.length,this.S=new Uint8Array(this.N);for(let a=0;a<this.N;++a)this.S[a]=255&a;let t=0;for(let a=0;a<this.N;++a)t=(this.S[a]+t+this.key[a%this.N])%this.N,[this.S[a],this.S[t]]=[this.S[t],this.S[a]];this.hash=1;for(let a=0;a<this.N;a++){let e=this.key[a];if(!e)continue;const t=this.hash*e>>>0;if(0==t||t<=this.hash)break;this.hash=t}}decrypt(e,t){this.FIRST_SEGMENT_SIZE=128,this.SEGMENT_SIZE=5120;let a=e.length,r=0;const n=e=>(a-=e,r+=e,t+=e,0==a);if(t<this.FIRST_SEGMENT_SIZE){const a=Math.min(e.length,this.FIRST_SEGMENT_SIZE-t);if(this.encFirstSegment(e.subarray(0,a),t),n(a))return}if(t%this.SEGMENT_SIZE!=0){const o=Math.min(this.SEGMENT_SIZE-t%this.SEGMENT_SIZE,a);if(this.encASegment(e.subarray(r,r+o),t),n(o))return}while(a>this.SEGMENT_SIZE)this.encASegment(e.subarray(r,r+this.SEGMENT_SIZE),t),n(this.SEGMENT_SIZE);a>0&&this.encASegment(e.subarray(r),t)}encFirstSegment(e,t){for(let a=0;a<e.length;a++)e[a]^=this.key[this.getSegmentKey(t+a)]}encASegment(e,t){const a=this.S.slice(0),r=t%this.SEGMENT_SIZE+this.getSegmentKey(Math.floor(t/this.SEGMENT_SIZE));let n=0,o=0;for(let c=-r;c<e.length;c++)n=(n+1)%this.N,o=(a[n]+o)%this.N,[a[o],a[n]]=[a[n],a[o]],c>=0&&(e[c]^=a[(a[n]+a[o])%this.N])}getSegmentKey(e){const t=this.key[e%this.N],a=Math.floor(this.hash/((e+1)*t)*100);return a%this.N}}class s{constructor(e){this.keydec=e}Decrypt(e){const t=new c(this.keydec);return t.decrypt(e,0),e}}var i=a("acf9");const l=a("cb96"),_={mgg:{handler:n["b"],ext:"ogg",detect:!0},mflac:{handler:n["a"],ext:"flac",detect:!0},mggl:{handler:n["b"],ext:"ogg",detect:!0},mgg0:{handler:n["b"],ext:"ogg",detect:!0},mgg1:{handler:n["b"],ext:"ogg",detect:!0},mflac0:{handler:n["a"],ext:"flac",detect:!0},mflac1:{handler:n["a"],ext:"flac",detect:!0},qmc0:{handler:n["c"],ext:"mp3",detect:!1},qmc2:{handler:n["c"],ext:"ogg",detect:!1},qmc3:{handler:n["c"],ext:"mp3",detect:!1},qmc8:{handler:n["c"],ext:"m4a",detect:!1},qmcogg:{handler:n["c"],ext:"ogg",detect:!1},qmcflac:{handler:n["c"],ext:"flac",detect:!1},bkcmp3:{handler:n["c"],ext:"mp3",detect:!1},bkcflac:{handler:n["c"],ext:"flac",detect:!1},bkcm4a:{handler:n["c"],ext:"m4a",detect:!1},bkcwav:{handler:n["c"],ext:"wav",detect:!1},bkcogg:{handler:n["c"],ext:"ogg",detect:!1},tkm:{handler:n["c"],ext:"m4a",detect:!1},"666c6163":{handler:n["c"],ext:"flac",detect:!1},"6d7033":{handler:n["c"],ext:"mp3",detect:!1},"6f6767":{handler:n["c"],ext:"ogg",detect:!1},"6d3461":{handler:n["c"],ext:"m4a",detect:!1},776176:{handler:n["c"],ext:"wav",detect:!1}};async function d(e,t,a){if(!(a in _))return{status:!1,message:"文件格式不正确"};const n=_[a],c=new Uint8Array(await Object(r["d"])(e));let d,u,m;if(n.detect){const e=[81,84,97,103],t=c.slice(-4);if(Object(r["f"])(e,t)){const e=new DataView(c.slice(c.length-8).buffer).getUint32(0,!1),t=c.length-8-e;d=c.slice(0,t),m=c.slice(t,t+e);const a=",".charCodeAt(0),r=m.findIndex(e=>e==a);let i=m.subarray(0,r);const l=Object(o["a"])(i);u=l.length>300?new s(l):n.handler(d)}else{const e=new DataView(c.slice(c.length-4).buffer).getUint32(0,!0),t=c.length-4-e;d=c.slice(0,t),m=c.slice(t,t+e);const a=Object(o["a"])(m);u=a.length>300?new s(a):n.handler(d)}}else d=c,u=n.handler(d);let f=u.Decrypt(d);const h=Object(r["b"])(f,n.ext),b=r["a"][h];let p=new Blob([f],{type:b});const g=await l.parseBlob(p);for(let r in g.native)g.native[r].some(e=>"TCON"===e.id&&"(12)"===e.value)&&(g.common.artist=Object(i["decode"])(g.common.artist,"gbk"),g.common.title=Object(i["decode"])(g.common.title,"gbk"),g.common.album=Object(i["decode"])(g.common.album,"gbk"));const w=Object(r["e"])(g.common.artist,g.common.title,t);return{status:!0,title:w.title,artist:w.artist,ext:h,album:g.common.album,file:URL.createObjectURL(p),mime:b}}},b716:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return n}));a("e260"),a("fb6a"),a("ace4"),a("5cc6"),a("b39a");var r=a("2fd6");function n(t){const a=new TextDecoder,r=e.from(a.decode(t),"base64");let n=r.length;if(n<16)throw"key length is too short";const s=o(106,8);let i=new Uint8Array(16);for(let e=0;e<8;e++)i[e<<1]=s[e],i[1+(e<<1)]=r[e];const l=c(r.subarray(8),i);return r.set(l,8),r.subarray(0,8+l.length)}function o(e,t){const a=[];for(let r=0;r<t;r++){const t=Math.tan(e+.1*r);a[r]=255&100*Math.abs(t)}return a}function c(e,t){if(e.length%8!=0)throw"inBuf size not a multiple of the block size";if(e.length<16)throw"inBuf size too small";const a=new r["a"](t,32),n=new Uint8Array(8),o=new DataView(n.buffer);a.decrypt(o,new DataView(e.buffer,e.byteOffset,8));const c=2,s=7,i=7&n[0],l=e.length-1-i-c-s,_=new Uint8Array(l);let d=new Uint8Array(8),u=e.slice(0,8),m=8,f=1+i;const h=()=>{d=u,u=e.slice(m,m+8);for(let e=0;e<8;e++)n[e]^=u[e];a.decrypt(o,o),m+=8,f=0};for(let r=1;r<=c;)f<8?(f++,r++):h();let b=0;while(b<l)f<8?(_[b]=n[f]^d[f],b++,f++):h();for(let r=1;r<=s;r++)if(n[f]!=d[f])throw"zero check failed";return _}}).call(this,a("1c35").Buffer)},bd2e:function(e,t,a){"use strict";a.r(t),a.d(t,"CommonDecrypt",(function(){return u}));a("baa5"),a("e6cf");const r=a("dde9"),n=a("b57b"),o=a("002f"),c=a("b6cf"),s=a("dd48"),i=a("d776"),l=a("fd2f"),_=a("a8ee"),d=a("282c");async function u(e){let t,a=e.name.substring(e.name.lastIndexOf(".")+1,e.name.length).toLowerCase(),u=e.name.substring(0,e.name.lastIndexOf("."));switch(a){case"ncm":t=await r.Decrypt(e.raw,u,a);break;case"uc":case"uc!":t=await d.Decrypt(e.raw,u,a);break;case"kwm":t=await n.Decrypt(e.raw,u,a);break;case"xm":case"wav":case"mp3":case"flac":case"m4a":t=await o.Decrypt(e.raw,u,a);break;case"ogg":case"mqcc":t=await l.Decrypt(e.raw,u,a);break;case"tm0":case"tm3":t=await l.Decrypt(e.raw,u,"mp3");break;case"efe":t=await s.Decrypt(e.raw,u,a);break;case"mflacc0":case"mggc1":case"mggc0":t=await i.Decrypt(e.raw,u,a);break;case"qmc0":case"qmc2":case"qmc3":case"qmc8":case"qmcflac":case"qmcogg":case"tkm":case"bkcmp3":case"bkcflac":case"bkcm4a":case"bkcwav":case"bkcogg":case"mflac":case"mgg":case"mflac0":case"mflac1":case"mgg1":case"mgg0":case"mggl":case"666c6163":case"6d7033":case"6f6767":case"6d3461":case"776176":t=await c.Decrypt(e.raw,u,a);break;case"tm2":case"tm6":t=await _.Decrypt(e.raw,u);break;default:t={status:!1,message:"不支持此文件格式"}}return t.rawExt||(t.rawExt=a),t.rawFilename||(t.rawFilename=u),t}},bfa2:function(e,t,a){var r=a("3d67"),n=["CommonDecrypt"];e.exports=function(){var e=new Worker(a.p+"23e2b01b6f30b338dc19.worker.js",{name:"[hash].worker.js"});return r(e,n),e}},d776:function(e,t,a){"use strict";a.r(t),a.d(t,"Decrypt",(function(){return i}));a("e260"),a("ace4"),a("e6cf"),a("5cc6"),a("b39a"),a("ddb0"),a("2b3d");var r=a("06dc"),n=a("9603"),o=a("acf9");const c=a("cb96"),s={mflacc0:{handler:n["a"],ext:"flac"},mggc1:{handler:n["b"],ext:"ogg"},mggc0:{handler:n["b"],ext:"ogg"}};async function i(e,t,a){if(!(a in s))return{status:!1,message:"File type is incorrect!"};const n=s[a],i=new Uint8Array(await Object(r["d"])(e));let l=i,_=n.handler(l);if(void 0===_)return{status:!1,message:a+"格式仅提供实验性支持"};let d=_.Decrypt(l);const u=Object(r["b"])(d,n.ext),m=r["a"][u];let f=new Blob([d],{type:m});const h=await c.parseBlob(f);for(let r in h.native)h.native[r].some(e=>"TCON"===e.id&&"(12)"===e.value)&&(h.common.artist=Object(o["decode"])(h.common.artist,"gbk"),h.common.title=Object(o["decode"])(h.common.title,"gbk"),h.common.album=Object(o["decode"])(h.common.album,"gbk"));const b=Object(r["e"])(h.common.artist,h.common.title,t);return{status:!0,title:b.title,artist:b.artist,ext:u,album:h.common.album,file:URL.createObjectURL(f),mime:m}}},dd48:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Decrypt",(function(){return Decrypt}));var core_js_modules_es_array_iterator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("e260"),core_js_modules_es_array_iterator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_iterator__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_slice__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("fb6a"),core_js_modules_es_array_slice__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_slice__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_buffer_slice__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("ace4"),core_js_modules_es_array_buffer_slice__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_buffer_slice__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_promise__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("e6cf"),core_js_modules_es_promise__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_promise__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_typed_array_uint8_array__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("5cc6"),core_js_modules_es_typed_array_uint8_array__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_typed_array_uint8_array__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_typed_array_to_locale_string__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("b39a"),core_js_modules_es_typed_array_to_locale_string__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_typed_array_to_locale_string__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("ddb0"),core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_web_dom_collections_iterator__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_web_url__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("2b3d"),core_js_modules_web_url__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_web_url__WEBPACK_IMPORTED_MODULE_7__),_util__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("06dc"),iconv_lite__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("acf9"),iconv_lite__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(iconv_lite__WEBPACK_IMPORTED_MODULE_9__);const musicMetadata=__webpack_require__("cb96");async function Decrypt(e,t,a){const r=new Uint8Array(await Object(_util__WEBPACK_IMPORTED_MODULE_8__["d"])(e));let n=QmcMaskDetectFlacEfe(r);void 0===n&&(n=QmcMaskDetectM4aEfe(r));let o=Math.min(5324800,r.length);for(let l=0;l<o;l++)r[l]^=n[l%64];const c=Object(_util__WEBPACK_IMPORTED_MODULE_8__["b"])(r,"mp3");e=new Blob([r],{type:_util__WEBPACK_IMPORTED_MODULE_8__["a"][c]});const s=await musicMetadata.parseBlob(e);for(let l in s.native)s.native[l].some(e=>"TCON"===e.id&&"(12)"===e.value)&&(s.common.artist=Object(iconv_lite__WEBPACK_IMPORTED_MODULE_9__["decode"])(s.common.artist,"gbk"),s.common.title=Object(iconv_lite__WEBPACK_IMPORTED_MODULE_9__["decode"])(s.common.title,"gbk"),s.common.album=Object(iconv_lite__WEBPACK_IMPORTED_MODULE_9__["decode"])(s.common.album,"gbk"));const i=Object(_util__WEBPACK_IMPORTED_MODULE_8__["e"])(s.common.artist,s.common.title,t);return{status:!0,title:i.title,artist:i.artist,ext:c,album:s.common.album,file:URL.createObjectURL(e),mime:_util__WEBPACK_IMPORTED_MODULE_8__["a"][c]}}function QmcMaskDetectFlacEfe(e){let t,a,r=Math.min(32768,e.length);for(let o=0;o<r;o+=128)try{t=e.slice(o,o+128);const r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];if(Object(_util__WEBPACK_IMPORTED_MODULE_8__["f"])(t.slice(0,64),t.slice(64))&&Object(_util__WEBPACK_IMPORTED_MODULE_8__["f"])(r,t.slice(32,64))&&Object(_util__WEBPACK_IMPORTED_MODULE_8__["f"])(r,t.slice(96))){a=t.slice(64);break}}catch(n){}return a}function QmcMaskDetectM4aEfe(data){const maska0=data.slice(128,144),mask0=data.slice(16,32),mask1=data.slice(80,96),mask2=data.slice(144,160),mask3=data.slice(208,224),mask4=data.slice(272,288),mask5=data.slice(336,352),mask6=data.slice(400,416),mask7=data.slice(464,480),mask8=data.slice(528,544),zero32=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let maska1=[],maskb=[],tmp;for(let i=0;i<mask0.length;i++){tmp=[mask0[i],mask1[i],mask2[i],mask3[i],mask4[i],mask5[i],mask6[i],mask7[i],mask8[i]];let obj={},key;for(let e=0;e<tmp.length;e++)key=tmp[e],obj[key]?obj[key]++:obj[key]=1;let count=0,maxString={};for(key in obj)count<obj[key]&&(count=obj[key],maxString=key);let nums=eval(maxString);maskb.push(nums),maska1.push(maska0[i])}let mask=maska1.concat(maskb,zero32);return mask}},dde9:function(e,t,a){"use strict";a.r(t),a.d(t,"Decrypt",(function(){return i}));a("c975"),a("e260"),a("fb6a"),a("ace4"),a("e6cf"),a("25f0"),a("5cc6"),a("b39a"),a("ddb0"),a("2b3d");var r=a("06dc");const n=a("3452"),o=n.enc.Hex.parse("687a4852416d736f356b496e62617857"),c=n.enc.Hex.parse("2331346C6A6B5F215C5D2630553C2728"),s=[67,84,69,78,70,68,65,77];async function i(e,t,a){const n=await Object(r["d"])(e),o=new DataView(n);if(!Object(r["f"])(s,new Uint8Array(n,0,8)))return{status:!1,message:"此ncm文件已损坏"};const c=l(o,n,10),i=_(c.data),u=d(o,n,c.offset),m=u.data;let f=u.offset+o.getUint32(u.offset+5,!0)+13,h=new Uint8Array(n,f),b=h.length;for(let r=0;r<b;++r)h[r]^=i[255&r];void 0===m.album&&(m.album="");const p=[];m.artist&&m.artist.forEach(e=>p.push(e[0]));const g=Object(r["e"])(p.join(" & "),m.musicName,t);0===p.length&&p.push(g.artist),void 0===m.format&&(m.format=Object(r["b"])(h,"mp3")),"mp3"===m.format&&(h=await Object(r["h"])(h,p,g.title,m.album));const w=r["a"][m.format],y=new Blob([h],{type:w});return{status:!0,title:g.title,artist:g.artist,ext:m.format,album:m.album,file:URL.createObjectURL(y),mime:w}}function l(e,t,a){const r=e.getUint32(a,!0);a+=4;const c=new Uint8Array(t,a,r).map(e=>100^e);a+=r;const s=n.AES.decrypt({ciphertext:n.lib.WordArray.create(c)},o,{mode:n.mode.ECB,padding:n.pad.Pkcs7}),i=new Uint8Array(s.sigBytes),l=s.words,_=s.sigBytes;for(let n=0;n<_;n++)i[n]=l[n>>>2]>>>24-n%4*8&255;return{offset:a,data:i.slice(17)}}function _(e){const t=new Uint8Array(Array(256).keys()),a=e.length;let r=0;for(let n=0;n<256;n++)r=t[n]+r+e[n%a]&255,[t[n],t[r]]=[t[r],t[n]];return t.map((e,t,a)=>{t=t+1&255;const r=a[t],n=a[t+r&255];return a[r+n&255]})}function d(e,t,a){const r=e.getUint32(a,!0);if(a+=4,0===r)return{data:{},offset:a};const o=new Uint8Array(t,a,r).map(e=>99^e);a+=r;const s=n.AES.decrypt({ciphertext:n.enc.Base64.parse(n.lib.WordArray.create(o.slice(22)).toString(n.enc.Utf8))},c,{mode:n.mode.ECB,padding:n.pad.Pkcs7}).toString(n.enc.Utf8),i=s.indexOf(":");let l=JSON.parse(s.slice(i+1));return"dj"===s.slice(0,i)&&(l=l.mainMusic),{data:l,offset:a}}},fa6ff:function(e,t,a){"use strict";var r=a("2dfe"),n=a.n(r);n.a},fd2f:function(e,t,a){"use strict";a.r(t),a.d(t,"Decrypt",(function(){return c}));a("e260"),a("ace4"),a("e6cf"),a("5cc6"),a("b39a"),a("ddb0"),a("2b3d");var r=a("06dc"),n=a("acf9");const o=a("cb96");async function c(e,t,a,c=!0){let s=a;if(c){const t=new Uint8Array(await Object(r["d"])(e));s=Object(r["b"])(t,a),s!==a&&(e=new Blob([t],{type:r["a"][s]}))}const i=await o.parseBlob(e);for(let r in i.native)i.native[r].some(e=>"TCON"===e.id&&"(12)"===e.value)&&(i.common.artist=Object(n["decode"])(i.common.artist,"gbk"),i.common.title=Object(n["decode"])(i.common.title,"gbk"),i.common.album=Object(n["decode"])(i.common.album,"gbk"));const l=Object(r["e"])(i.common.artist,i.common.title,t);return{status:!0,title:l.title,artist:l.artist,ext:s,album:i.common.album,file:URL.createObjectURL(e),mime:r["a"][s]}}}});