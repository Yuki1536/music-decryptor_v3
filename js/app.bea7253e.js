(function(t){function e(e){for(var n,o,i=e[0],s=e[1],l=e[2],u=0,f=[];u<i.length;u++)o=i[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);d&&d(e);while(f.length)f.shift()();return c.push.apply(c,l||[]),a()}function a(){for(var t,e=0;e<c.length;e++){for(var a=c[e],n=!0,i=1;i<a.length;i++){var s=a[i];0!==r[s]&&(n=!1)}n&&(c.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},r={app:0},c=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],s=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var d=s;c.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"002f":function(t,e,a){"use strict";a.r(e),a.d(e,"Decrypt",(function(){return l}));a("e260"),a("fb6a"),a("ace4"),a("e6cf"),a("5cc6"),a("b39a"),a("ddb0"),a("2b3d");var n=a("06dc"),r=a("fd2f");const c=a("cb96"),o=[105,102,109,116],i=[254,254,254,254],s={" WAV":".wav",FLAC:".flac"," MP3":".mp3"," A4M":".m4a"};async function l(t,e,a){const l=new Uint8Array(await Object(n["d"])(t));if(!Object(n["f"])(o,l.slice(0,4))||!Object(n["f"])(i,l.slice(8,12)))return"xm"===a?{status:!1,message:"此xm文件已损坏"}:await Object(r["Decrypt"])(t,e,a,!0);let d=(new TextDecoder).decode(l.slice(4,8));if(!s.hasOwnProperty(d))return{status:!1,message:"未知的xm文件类型"};let u=l[15],f=l[12]|l[13]<<8|l[14]<<16,m=l.slice(16),h=m.length;for(let n=f;n<h;++n)m[n]=m[n]-u^255;const b=Object(n["b"])(m,"mp3"),p=n["a"][b];let g=new Blob([m],{type:p});const w=await c.parseBlob(g);"wav"===b&&(w.common.album="",w.common.artist="",w.common.title="");const y=Object(n["e"])(w.common.artist,w.common.title,e,"_");return{status:!0,title:y.title,artist:y.artist,ext:b,album:w.common.album,file:URL.createObjectURL(g),mime:p,rawExt:"xm"}}},"034f":function(t,e,a){"use strict";var n=a("85ec"),r=a.n(n);r.a},"06dc":function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"g",(function(){return o})),a.d(e,"a",(function(){return d})),a.d(e,"d",(function(){return u})),a.d(e,"e",(function(){return f})),a.d(e,"f",(function(){return m})),a.d(e,"b",(function(){return h})),a.d(e,"h",(function(){return b}));a("fb6a"),a("e6cf"),a("1276"),a("498a");const n=a("7907"),r=[102,76,97,67],c=[73,68,51],o=[79,103,103,83],i=[102,116,121,112],s=[48,38,178,117,142,102,207,17,166,217,0,170,0,98,206,108],l=[82,73,70,70],d={mp3:"audio/mpeg",flac:"audio/flac",m4a:"audio/mp4",ogg:"audio/ogg",wma:"audio/x-ms-wma",wav:"audio/x-wav"};async function u(t){return await new Promise(e=>{const a=new FileReader;a.onload=t=>{e(t.target.result)},a.readAsArrayBuffer(t)})}function f(t,e,a,n="-"){let r="",c="",o=a.split(n);return o.length>1?(r=o[0].trim(),c=o[1].trim()):1===o.length&&(c=o[0].trim()),"string"==typeof t&&""!==t&&(r=t),"string"==typeof e&&""!==e&&(c=e),{artist:r,title:c}}function m(t,e){return t.every((t,a)=>t===e[a])}function h(t,e){return m(c,t.slice(0,c.length))?"mp3":m(r,t.slice(0,r.length))?"flac":m(o,t.slice(0,o.length))?"ogg":m(i,t.slice(4,4+i.length))?"m4a":m(s,t.slice(0,s.length))?"wma":m(l,t.slice(0,l.length))?"wav":e}async function b(t,e,a,r){const c=new n(t);return c.setFrame("TPE1",e).setFrame("TIT2",a).setFrame("TALB",r),c.addTag(),c.arrayBuffer}},1:function(t,e){},2:function(t,e){},"282c":function(t,e,a){"use strict";a.r(e),a.d(e,"Decrypt",(function(){return o}));a("e260"),a("ace4"),a("e6cf"),a("5cc6"),a("b39a"),a("ddb0"),a("2b3d");var n=a("06dc"),r=a("acf9");const c=a("cb96");async function o(t,e,a){const o=new Uint8Array(await Object(n["d"])(t));let i=o.length;for(let n=0;n<i;n++)o[n]^=163;const s=Object(n["b"])(o,"mp3");t=new Blob([o],{type:n["a"][s]});const l=await c.parseBlob(t);for(let n in l.native)l.native[n].some(t=>"TCON"===t.id&&"(12)"===t.value)&&(l.common.artist=Object(r["decode"])(l.common.artist,"gbk"),l.common.title=Object(r["decode"])(l.common.title,"gbk"),l.common.album=Object(r["decode"])(l.common.album,"gbk"));const d=Object(n["e"])(l.common.artist,l.common.title,e);return{status:!0,title:d.title,artist:d.artist,ext:s,album:l.common.album,file:URL.createObjectURL(t),mime:n["a"][s]}}},"2dfe":function(t,e,a){},"2fd6":function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));a("ace4");class n{constructor(t,e=64){if(16!=t.length)throw"incorrect key size";if(0!=(1&e))throw"odd number of rounds specified";this.delta=2654435769;const a=new DataView(t.buffer);this.k0=a.getUint32(0,!1),this.k1=a.getUint32(4,!1),this.k2=a.getUint32(8,!1),this.k3=a.getUint32(12,!1),this.rounds=e}encrypt(t,e){let a=e.getUint32(0,!1),n=e.getUint32(4,!1),r=0;for(let c=0;c<this.rounds/2;c++)r+=this.delta,a+=(n<<4)+this.k0^n+r^(n>>>5)+this.k1,n+=(a<<4)+this.k2^a+r^(a>>>5)+this.k3;t.setUint32(0,a,!1),t.setUint32(4,n,!1)}decrypt(t,e){let a=e.getUint32(0,!1),n=e.getUint32(4,!1),r=this.delta*this.rounds/2;for(let c=0;c<this.rounds/2;c++)n-=(a<<4)+this.k2^a+r^(a>>>5)+this.k3,a-=(n<<4)+this.k0^n+r^(n>>>5)+this.k1,r-=this.delta;t.setUint32(0,a,!1),t.setUint32(4,n,!1)}}},3:function(t,e){},4:function(t,e){},5:function(t,e){},"56d7":function(t,e,a){"use strict";a.r(e);a("46a1"),a("450d");var n=a("e5f2"),r=a.n(n),c=(a("6b30"),a("c284")),o=a.n(c),i=(a("0c67"),a("299c")),s=a.n(i),l=(a("b5d8"),a("f494")),d=a.n(l),u=(a("560b"),a("dcdc")),f=a.n(u),m=(a("f225"),a("89a9")),h=a.n(m),b=(a("f4f9"),a("c2cc")),p=a.n(b),g=(a("7a0f"),a("0f6c")),w=a.n(g),y=(a("aaa5"),a("a578")),v=a.n(y),_=(a("adec"),a("3d2d")),k=a.n(_),x=(a("bdc7"),a("aa2f")),O=a.n(x),j=(a("de31"),a("c69e")),S=a.n(j),M=(a("5466"),a("ecdf")),D=a.n(M),E=(a("38a0"),a("ad41")),U=a.n(E),A=(a("1951"),a("eedf")),T=a.n(A),C=(a("acb6"),a("c673")),N=a.n(C),B=(a("fd71"),a("a447")),I=a.n(B),L=a("2b0e"),F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{attrs:{id:"app"}},[a("el-main",[a("x-upload",{on:{handle_error:t.showFail,handle_finish:t.showSuccess}}),a("div",{attrs:{id:"app-control"}},[a("el-row",{staticStyle:{"padding-bottom":"1em","font-size":"14px"}},[t._v(" 歌曲命名格式： "),a("el-radio",{attrs:{label:"1",name:"format"},model:{value:t.download_format,callback:function(e){t.download_format=e},expression:"download_format"}},[t._v("同原文件名")]),a("el-radio",{attrs:{label:"2",name:"format"},model:{value:t.download_format,callback:function(e){t.download_format=e},expression:"download_format"}},[t._v("歌手-歌曲名")]),a("el-radio",{attrs:{label:"3",name:"format"},model:{value:t.download_format,callback:function(e){t.download_format=e},expression:"download_format"}},[t._v("歌曲名")]),a("el-radio",{attrs:{label:"4",name:"format"},model:{value:t.download_format,callback:function(e){t.download_format=e},expression:"download_format"}},[t._v("歌曲名-歌手")])],1),a("el-row",[a("el-button",{attrs:{icon:"el-icon-download",plain:""},on:{click:t.handleDownloadAll}},[t._v("下载全部")]),a("el-button",{attrs:{icon:"el-icon-delete",plain:"",type:"danger"},on:{click:t.handleDeleteAll}},[t._v("清除全部")]),a("el-checkbox",{staticStyle:{"margin-left":"1em"},attrs:{border:""},model:{value:t.single_loop,callback:function(e){t.single_loop=e},expression:"single_loop"}},[t._v("单曲循环")]),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top-start"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v(" 当您使用此工具进行大量文件解密的时候，建议开启此选项。"),a("br"),t._v(" 开启后，解密结果将不会存留于浏览器中，防止内存不足。 ")]),a("el-checkbox",{staticStyle:{"margin-left":"-1.4em"},attrs:{border:""},model:{value:t.instant_download,callback:function(e){t.instant_download=e},expression:"instant_download"}},[t._v("立即保存")])],1)],1)],1),a("audio",{attrs:{autoplay:t.playing_auto,src:t.playing_url,loop:t.single_loop,controlslist:"nodownload",controls:""}}),a("x-preview",{attrs:{download_format:t.download_format,"table-data":t.tableData},on:{music_changed:t.changePlaying}})],1),a("el-footer",{attrs:{id:"app-footer"}},[a("el-row",[a("a",{attrs:{target:"_blank"}},[t._v("音乐文件解密")]),t._v("(v"),a("span",{domProps:{textContent:t._s(t.version)}}),t._v(")：移除已购音乐的加密保护。 ")]),a("el-row",[t._v(" 目前支持网易云音乐(ncm), QQ音乐(qmcflac, qmc, mflac, mgg), 虾米音乐(xm), 酷我音乐(kwm)等。 ")]),a("el-row",[t._v(" Select Language: "),a("a",{attrs:{target:"_self"}},[t._v("中文 (简体) ")]),t._v(" "),a("a",{attrs:{href:"./en/",target:"_self"}},[t._v(" English")])]),a("el-row",[t._v(" 音乐解密程序使用 MIT许可协议 开放源代码。 ")])],1)],1)},R=[],P=(a("e6cf"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-upload",{attrs:{"auto-upload":!1,"on-change":t.handleFile,"show-file-list":!1,action:"",drag:"",multiple:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[t._v("将文件拖到此处，或"),a("em",[t._v("点击选择")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("此程序仅在浏览器内对文件进行解密，无需网络连接。")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("当前线程数: "),a("span",{domProps:{textContent:t._s(t.thread_num)}})]),a("transition",{attrs:{name:"el-fade-in"}},[a("el-progress",{directives:[{name:"show",rawName:"v-show",value:t.progress_show,expression:"progress_show"}],staticStyle:{margin:"16px 6px 0 6px"},attrs:{format:t.progressFormat,percentage:t.progress_percent,"stroke-width":16,"text-inside":!0}})],1)],1)}),q=[],$={name:"upload",data(){return{cacheQueue:[],workers:[],idle_workers:[],thread_num:1,progress_show:!1,progress_finished:0,progress_all:0,progress_percent:0}},mounted(){if(navigator.hardwareConcurrency>1&&"https:"===document.location.protocol){const t=a("bfa2");this.thread_num=navigator.hardwareConcurrency;for(let e=0;e<this.thread_num;e++)this.workers.push(t().CommonDecrypt),this.idle_workers.push(e)}else{const t=a("bd2e");this.workers.push(t.CommonDecrypt),this.idle_workers.push(0)}},methods:{progressFormat(){return this.progress_finished+"/"+this.progress_all},progressChange(t,e){this.progress_all+=e,this.progress_finished+=t,this.progress_percent=Math.round(this.progress_finished/this.progress_all*100),this.progress_finished===this.progress_all?setTimeout(()=>{this.progress_show=!1,this.progress_finished=0,this.progress_all=0},3e3):this.progress_show=!0},handleFile(t){this.progressChange(0,1),this.idle_workers.length>0?this.handleDoFile(t,this.idle_workers.shift()):this.cacheQueue.push(t)},handleCacheQueue(t){0!==this.cacheQueue.length?this.handleDoFile(this.cacheQueue.shift(),t):this.idle_workers.push(t)},handleDoFile(t,e){this.workers[e](t).then(t=>{this.$emit("handle_finish",t),this.handleCacheQueue(e),this.progressChange(1,0)}).catch(a=>{this.$emit("handle_error",a,t.name),this.handleCacheQueue(e),this.progressChange(1,0)})}}},G=$,Z=(a("fa6ff"),a("2877")),Q=Object(Z["a"])(G,P,q,!1,null,"3eed55ca",null),z=Q.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{label:"封面"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"image-slot el-image__error",staticStyle:{width:"100px",height:"100px"}},[t._v(" 暂无封面 ")])]}}])}),a("el-table-column",{attrs:{label:"歌曲名"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.title))])]}}])}),a("el-table-column",{attrs:{label:"歌手"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.artist))])]}}])}),a("el-table-column",{attrs:{label:"专辑"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.album))])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{circle:"",icon:"el-icon-video-play",type:"success"},on:{click:function(a){return t.handlePlay(e.$index,e.row)}}}),a("el-button",{attrs:{circle:"",icon:"el-icon-download"},on:{click:function(a){return t.handleDownload(e.row)}}}),a("el-button",{attrs:{circle:"",icon:"el-icon-delete",type:"danger"},on:{click:function(a){return t.handleDelete(e.$index,e.row)}}})]}}])})],1)},W=[];a("a434"),a("e260"),a("ddb0"),a("2b3d");function H(t,e){const a=document.createElement("a");switch(a.href=t.file,e){default:case"1":a.download=t.rawFilename+"."+t.ext;break;case"2":a.download=t.artist+"-"+t.title+"."+t.ext;break;case"3":a.download=t.title+"."+t.ext;break;case"4":a.download=t.title+"-"+t.artist+"."+t.ext;break}document.body.append(a),a.click(),a.remove()}function J(t){URL.revokeObjectURL(t.file)}var K={name:"preview",props:{tableData:{type:Array,required:!0},download_format:{type:String,required:!0}},methods:{handlePlay(t,e){this.$emit("music_changed",e.file)},handleDelete(t,e){J(e),this.tableData.splice(t,1)},handleDownload(t){H(t,this.download_format)}}},X=K,Y=Object(Z["a"])(X,V,W,!1,null,"2c426aa2",null),tt=Y.exports,et=a("9224"),at={name:"app",components:{xUpload:z,xPreview:tt},data(){return{version:et.version,activeIndex:"1",tableData:[],playing_url:"",playing_auto:!1,single_loop:!1,download_format:"1",instant_download:!1}},created(){this.$nextTick((function(){this.finishLoad()}))},methods:{async finishLoad(){const t=document.getElementById("loader-mask");t.remove(),this.$notify.info({title:"离线使用",message:"我们使用PWA技术，无网络也能使用<br/>最近更新："+et.updateInfo,dangerouslyUseHTMLString:!0,duration:1e4,position:"top-left"})},showSuccess(t){t.status?this.instant_download?(H(t,this.download_format),J(t)):(this.tableData.push(t),this.$notify.success({title:"解密成功",message:"成功解密 "+t.title,duration:3e3})):this.showFail(t.message,t.rawFilename+"."+t.rawExt)},showFail(t,e){this.$notify.error({title:"出现问题",message:t+"，"+e,dangerouslyUseHTMLString:!0,duration:6e3})},changePlaying(t){this.playing_url=t,this.playing_auto=!0},handleDeleteAll(){this.tableData.forEach(t=>{J(t)}),this.tableData=[]},handleDownloadAll(){let t=0,e=setInterval(()=>{t<this.tableData.length?(H(this.tableData[t],this.download_format),t++):clearInterval(e)},300)},setLoopAudio(){this.single_loop?this.single_loop=!1:this.single_loop=!0}}},nt=at,rt=(a("034f"),Object(Z["a"])(nt,F,R,!1,null,null,null)),ct=rt.exports,ot=a("9483");Object(ot["a"])("service-worker.js",{ready(){console.log("程序已就绪。")},registered(){console.log("Service Worker启动成功。")},cached(){console.log("程序已做好离线使用前的准备工作。")},updatefound(){console.log("正在下载内容...")},updated(){console.log("内容更新成功!"),window.location.reload()},offline(){console.log("无可用网络连接，进入离线模式。")},error(t){console.error("Service Worker启动失败，错误信息: ",t)}}),L["default"].use(I.a),L["default"].use(N.a),L["default"].use(T.a),L["default"].use(U.a),L["default"].use(D.a),L["default"].use(S.a),L["default"].use(O.a),L["default"].use(k.a),L["default"].use(v.a),L["default"].use(w.a),L["default"].use(p.a),L["default"].use(h.a),L["default"].use(f.a),L["default"].use(d.a),L["default"].use(s.a),L["default"].use(o.a),L["default"].prototype.$notify=r.a,L["default"].config.productionTip=!1,new L["default"]({render:t=>t(ct)}).$mount("#app")},6:function(t,e){},"85ec":function(t,e,a){},9224:function(t){t.exports=JSON.parse('{"name":"music-decryptor","version":"1.5.2","updateInfo":"支持.efe/.mqcc解密，实验性支持.mflacc0/.mggc1/.mggc0解密","license":"MIT","description":"在任何设备上解密已购的加密音乐文件！","private":true,"scripts":{"serve":"vue-cli-service serve","build":"vue-cli-service build","fix-compatibility":"node ./src/fix-compatibility.js"},"dependencies":{"base64-js":"^1.3.1","browser-id3-writer":"^4.4.0","core-js":"^3.6.4","crypto-js":"^4.0.0","element-ui":"^2.13.0","iconv-lite":"^0.5.1","music-metadata-browser":"^2.0.5","register-service-worker":"^1.7.1","vue":"^2.6.11"},"devDependencies":{"@vue/cli-plugin-babel":"^4.3.0","@vue/cli-plugin-pwa":"^4.3.0","@vue/cli-service":"^4.3.0","babel-plugin-component":"^1.1.1","vue-cli-plugin-element":"^1.0.1","vue-template-compiler":"^2.6.11","workerize-loader":"^1.2.1"}}')},9603:function(t,e,a){"use strict";a.d(e,"c",(function(){return d})),a.d(e,"a",(function(){return u})),a.d(e,"b",(function(){return f}));a("26e9"),a("fb6a");var n=a("06dc");const r=[79,103,103,83,0,2,0,0,0,0,0,0,0,0,255,255,255,255,0,0,0,0,255,255,255,255,1,30,1,118,111,114,98,105,115,0,0,0,0,2,68,172,0,0,0,0,0,0,0,238,2,0,0,0,0,0,184,1,79,103,103,83,0,0,0,0,0,0,0,0,0,0,255,255,255,255,1,0,0,0,255,255,255,255],c=[3,118,111,114,98,105,115,44,0,0,0,88,105,112,104,46,79,114,103,32,108,105,98,86,111,114,98,105,115,32,73,32,50,48,49,53,48,49,48,53,32,40,226,155,132,226,155,132,226,155,132,226,155,132,41,255,0,0,0,255,0,0,0,84,73,84,76,69,61],o=[9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,9,9,9,9,0,0,0,0,9,9,9,9,9,9,9,9,9,9,9,9,9,6,3,3,3,3,6,6,6,6,3,3,3,3,6,6,6,6,6,9,9,9,9,9,9,9,9,9,9,9,9,9,9,9,0,0,0,0,9,9,9,9,0,0,0,0],i=[3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,1,3,3,0,1,3,3,3,3,3,3,3,3],s=[222,81,250,195,74,214,202,144,126,103,94,247,213,82,132,216,71,149,187,161,170,198,102,35,146,98,243,116,161,159,244,160,29,63,91,240,19,14,9,61,249,188,0,17];class l{constructor(t,e,a){void 0===e||void 0===a?(44===t.length?(this.Matrix44=t,this.generateMask128from44()):(this.Matrix128=t,this.generateMask44from128()),this.generateMask58from128()):(this.Matrix58=t,this.Super58A=e,this.Super58B=a,this.generateMask128from58(),this.generateMask44from128())}generateMask128from58(){if(56!==this.Matrix58.length)throw"incorrect mask58 matrix length";let t=[];for(let e=0;e<8;e+=1)t=t.concat([this.Super58A],this.Matrix58.slice(7*e,7*e+7),[this.Super58B],this.Matrix58.slice(49-7*e,56-7*e).reverse());this.Matrix128=t}generateMask58from128(){if(128!==this.Matrix128.length)throw"incorrect mask128 length";const t=this.Matrix128[0],e=this.Matrix128[8];let a=[];for(let r=0;r<8;r+=1){let c=16*r,o=120-c;if(this.Matrix128[c]!==t||this.Matrix128[c+8]!==e)throw"decode mask-128 to mask-58 failed";let i=this.Matrix128.slice(c+1,c+8),s=this.Matrix128.slice(o+1,o+8).reverse();if(!Object(n["f"])(i,s))throw"decode mask-128 to mask-58 failed";a=a.concat(i)}this.Matrix58=a,this.Super58A=t,this.Super58B=e}generateMask44from128(){if(128!==this.Matrix128.length)throw"incorrect mask128 matrix length";let t=p();this.Matrix44=[];let e=0;t.forEach(t=>{let a=t.length;for(let e=1;e<a;e++)if(this.Matrix128[t[0]]!==this.Matrix128[t[e]])throw"decode mask-128 to mask-44 failed";this.Matrix44[e]=this.Matrix128[t[0]],e++})}generateMask128from44(){if(44!==this.Matrix44.length)throw"incorrect mask length";this.Matrix128=[];let t=0;p().forEach(e=>{e.forEach(e=>{this.Matrix128[e]=this.Matrix44[t]}),t++})}Decrypt(t){let e=t.slice(0),a=-1,n=-1;for(let r=0;r<t.length;r++)a++,n++,(32768===a||a>32768&&(a+1)%32768===0)&&(a++,n++),n>=128&&(n-=128),e[r]^=this.Matrix128[n];return e}}function d(){return new l(s)}function u(t){let e,a=Math.min(32768,t.length);for(let c=0;c<a;c+=128)try{if(e=new l(t.slice(c,c+128)),Object(n["f"])(n["c"],e.Decrypt(t.slice(0,n["c"].length))))break}catch(r){}return e}function f(t){if(t.length<256)return;let e={};for(let n=0;n<44;n++)e[n]={};const a=t[84]^t[12]^r[12],c=w(a),o=y(a);for(let n=0;n<c.length;n++){if(0===o[n])continue;let a=g(n),r=t[n]^c[n],i=o[n];r in e[a]?e[a][r]+=i:e[a][r]=i}let i=[];try{for(let t=0;t<44;t++)i[t]=m(e[t])}catch(u){return}const s=new l(i);let d=s.Decrypt(t.slice(0,n["g"].length));return Object(n["f"])(n["g"],d)?s:void 0}function m(t){if(0===t.length)throw"can not match at least one key";let e,a=0;for(let n in t)t[n]>a&&(e=n,a=t[n]);return parseInt(e)}const h=[],b=[];function p(){return h}function g(t){return b[t%128]}function w(t){let e=[t,255];for(let a=2;a<t;a++)e.push(255);return e.push(255),r.concat(e,c)}function y(t){let e=[6,0];for(let a=2;a<t;a++)e.push(4);return e.push(0),o.concat(e,i)}(function(){for(let e=0;e<128;e++){let t=(e*e+27)%256;t in h?h[t].push(e):h[t]=[e]}let t=0;h.forEach(e=>{e.forEach(e=>{b[e]=t}),t++})})()},a8ee:function(t,e,a){"use strict";a.r(e),a.d(e,"Decrypt",(function(){return o}));a("e260"),a("ace4"),a("e6cf"),a("5cc6"),a("b39a");var n=a("fd2f"),r=a("06dc");const c=[0,0,0,32,102,116,121,112];async function o(t,e){const a=await Object(r["d"])(t),o=new Uint8Array(a);for(let n=0;n<8;++n)o[n]=c[n];const i=new Blob([o],{type:"audio/mp4"});return await Object(n["Decrypt"])(i,e,"m4a",!1)}},b57b:function(t,e,a){"use strict";a.r(e),a.d(e,"Decrypt",(function(){return s}));a("e260"),a("fb6a"),a("ace4"),a("e6cf"),a("25f0"),a("843c"),a("5cc6"),a("b39a"),a("ddb0"),a("2b3d");var n=a("06dc"),r=a("acf9");const c=a("cb96"),o=[121,101,101,108,105,111,110,45,107,117,119,111,45,116,109,101],i="MoOtOiTvINGwd2E6n0E1i7L5t2IoOoNk";async function s(t,e,a){const i=new Uint8Array(await Object(n["d"])(t));if(!Object(n["f"])(o,i.slice(0,16)))return{status:!1,message:"此kwm文件已损坏"};let s=i.slice(24,32),d=l(s),u=i.slice(1024),f=u.length;for(let n=0;n<f;++n)u[n]^=d[n%32];const m=Object(n["b"])(u,"mp3"),h=n["a"][m];let b=new Blob([u],{type:h});const p=await c.parseBlob(b);for(let n in p.native)p.native[n].some(t=>"TCON"===t.id&&"(12)"===t.value)&&(p.common.artist=Object(r["decode"])(p.common.artist,"gbk"),p.common.title=Object(r["decode"])(p.common.title,"gbk"),p.common.album=Object(r["decode"])(p.common.album,"gbk"));const g=Object(n["e"])(p.common.artist,p.common.title,e);return{status:!0,title:g.title,artist:g.artist,ext:m,album:p.common.album,file:URL.createObjectURL(b),mime:h}}function l(t){let e=new DataView(t.buffer),a=e.getBigUint64(0,!0).toString(),n=d(a),r=new Uint8Array(32);for(let c=0;c<32;c++)r[c]=i[c].charCodeAt()^n[c].charCodeAt();return r}function d(t){let e=t.length,a=t;return e>32?a=t.slice(0,32):e<32&&(a=t.padEnd(32,t)),a}},b6cf:function(t,e,a){"use strict";a.r(e),a.d(e,"Decrypt",(function(){return u}));a("e260"),a("fb6a"),a("ace4"),a("e6cf"),a("5cc6"),a("b39a"),a("ddb0"),a("2b3d");var n=a("06dc"),r=a("9603"),c=a("b716");class o{constructor(t){if(0==t.length)throw"invalid key size";this.key=t,this.N=t.length,this.S=new Uint8Array(this.N);for(let a=0;a<this.N;++a)this.S[a]=255&a;let e=0;for(let a=0;a<this.N;++a)e=(this.S[a]+e+this.key[a%this.N])%this.N,[this.S[a],this.S[e]]=[this.S[e],this.S[a]];this.hash=1;for(let a=0;a<this.N;a++){let t=this.key[a];if(!t)continue;const e=this.hash*t>>>0;if(0==e||e<=this.hash)break;this.hash=e}}decrypt(t,e){this.FIRST_SEGMENT_SIZE=128,this.SEGMENT_SIZE=5120;let a=t.length,n=0;const r=t=>(a-=t,n+=t,e+=t,0==a);if(e<this.FIRST_SEGMENT_SIZE){const a=Math.min(t.length,this.FIRST_SEGMENT_SIZE-e);if(this.encFirstSegment(t.subarray(0,a),e),r(a))return}if(e%this.SEGMENT_SIZE!=0){const c=Math.min(this.SEGMENT_SIZE-e%this.SEGMENT_SIZE,a);if(this.encASegment(t.subarray(n,n+c),e),r(c))return}while(a>this.SEGMENT_SIZE)this.encASegment(t.subarray(n,n+this.SEGMENT_SIZE),e),r(this.SEGMENT_SIZE);a>0&&this.encASegment(t.subarray(n),e)}encFirstSegment(t,e){for(let a=0;a<t.length;a++)t[a]^=this.key[this.getSegmentKey(e+a)]}encASegment(t,e){const a=this.S.slice(0),n=e%this.SEGMENT_SIZE+this.getSegmentKey(Math.floor(e/this.SEGMENT_SIZE));let r=0,c=0;for(let o=-n;o<t.length;o++)r=(r+1)%this.N,c=(a[r]+c)%this.N,[a[c],a[r]]=[a[r],a[c]],o>=0&&(t[o]^=a[(a[r]+a[c])%this.N])}getSegmentKey(t){const e=this.key[t%this.N],a=Math.floor(this.hash/((t+1)*e)*100);return a%this.N}}class i{constructor(t){this.keydec=t}Decrypt(t){const e=new o(this.keydec);return e.decrypt(t,0),t}}var s=a("acf9");const l=a("cb96"),d={mgg:{handler:r["b"],ext:"ogg",detect:!0},mflac:{handler:r["a"],ext:"flac",detect:!0},mggl:{handler:r["b"],ext:"ogg",detect:!0},mgg0:{handler:r["b"],ext:"ogg",detect:!0},mgg1:{handler:r["b"],ext:"ogg",detect:!0},mflac0:{handler:r["a"],ext:"flac",detect:!0},mflac1:{handler:r["a"],ext:"flac",detect:!0},qmc0:{handler:r["c"],ext:"mp3",detect:!1},qmc2:{handler:r["c"],ext:"ogg",detect:!1},qmc3:{handler:r["c"],ext:"mp3",detect:!1},qmc8:{handler:r["c"],ext:"m4a",detect:!1},qmcogg:{handler:r["c"],ext:"ogg",detect:!1},qmcflac:{handler:r["c"],ext:"flac",detect:!1},bkcmp3:{handler:r["c"],ext:"mp3",detect:!1},bkcflac:{handler:r["c"],ext:"flac",detect:!1},bkcm4a:{handler:r["c"],ext:"m4a",detect:!1},bkcwav:{handler:r["c"],ext:"wav",detect:!1},bkcogg:{handler:r["c"],ext:"ogg",detect:!1},tkm:{handler:r["c"],ext:"m4a",detect:!1},"666c6163":{handler:r["c"],ext:"flac",detect:!1},"6d7033":{handler:r["c"],ext:"mp3",detect:!1},"6f6767":{handler:r["c"],ext:"ogg",detect:!1},"6d3461":{handler:r["c"],ext:"m4a",detect:!1},776176:{handler:r["c"],ext:"wav",detect:!1}};async function u(t,e,a){if(!(a in d))return{status:!1,message:"文件格式不正确"};const r=d[a],o=new Uint8Array(await Object(n["d"])(t));let u,f,m;if(r.detect){const t=[81,84,97,103],e=o.slice(-4);if(Object(n["f"])(t,e)){const t=new DataView(o.slice(o.length-8).buffer).getUint32(0,!1),e=o.length-8-t;u=o.slice(0,e),m=o.slice(e,e+t);const a=",".charCodeAt(0),n=m.findIndex(t=>t==a);let s=m.subarray(0,n);const l=Object(c["a"])(s);f=l.length>300?new i(l):r.handler(u)}else{const t=new DataView(o.slice(o.length-4).buffer).getUint32(0,!0),e=o.length-4-t;u=o.slice(0,e),m=o.slice(e,e+t);const a=Object(c["a"])(m);f=a.length>300?new i(a):r.handler(u)}}else u=o,f=r.handler(u);let h=f.Decrypt(u);const b=Object(n["b"])(h,r.ext),p=n["a"][b];let g=new Blob([h],{type:p});const w=await l.parseBlob(g);for(let n in w.native)w.native[n].some(t=>"TCON"===t.id&&"(12)"===t.value)&&(w.common.artist=Object(s["decode"])(w.common.artist,"gbk"),w.common.title=Object(s["decode"])(w.common.title,"gbk"),w.common.album=Object(s["decode"])(w.common.album,"gbk"));const y=Object(n["e"])(w.common.artist,w.common.title,e);return{status:!0,title:y.title,artist:y.artist,ext:b,album:w.common.album,file:URL.createObjectURL(g),mime:p}}},b716:function(t,e,a){"use strict";(function(t){a.d(e,"a",(function(){return r}));a("e260"),a("fb6a"),a("ace4"),a("5cc6"),a("b39a");var n=a("2fd6");function r(e){const a=new TextDecoder,n=t.from(a.decode(e),"base64");let r=n.length;if(r<16)throw"key length is too short";const i=c(106,8);let s=new Uint8Array(16);for(let t=0;t<8;t++)s[t<<1]=i[t],s[1+(t<<1)]=n[t];const l=o(n.subarray(8),s);return n.set(l,8),n.subarray(0,8+l.length)}function c(t,e){const a=[];for(let n=0;n<e;n++){const e=Math.tan(t+.1*n);a[n]=255&100*Math.abs(e)}return a}function o(t,e){if(t.length%8!=0)throw"inBuf size not a multiple of the block size";if(t.length<16)throw"inBuf size too small";const a=new n["a"](e,32),r=new Uint8Array(8),c=new DataView(r.buffer);a.decrypt(c,new DataView(t.buffer,t.byteOffset,8));const o=2,i=7,s=7&r[0],l=t.length-1-s-o-i,d=new Uint8Array(l);let u=new Uint8Array(8),f=t.slice(0,8),m=8,h=1+s;const b=()=>{u=f,f=t.slice(m,m+8);for(let t=0;t<8;t++)r[t]^=f[t];a.decrypt(c,c),m+=8,h=0};for(let n=1;n<=o;)h<8?(h++,n++):b();let p=0;while(p<l)h<8?(d[p]=r[h]^u[h],p++,h++):b();for(let n=1;n<=i;n++)if(r[h]!=u[h])throw"zero check failed";return d}}).call(this,a("1c35").Buffer)},bd2e:function(t,e,a){"use strict";a.r(e),a.d(e,"CommonDecrypt",(function(){return f}));a("baa5"),a("e6cf");const n=a("dde9"),r=a("b57b"),c=a("002f"),o=a("b6cf"),i=a("dd48"),s=a("d776"),l=a("fd2f"),d=a("a8ee"),u=a("282c");async function f(t){let e,a=t.name.substring(t.name.lastIndexOf(".")+1,t.name.length).toLowerCase(),f=t.name.substring(0,t.name.lastIndexOf("."));switch(a){case"ncm":e=await n.Decrypt(t.raw,f,a);break;case"uc":case"uc!":e=await u.Decrypt(t.raw,f,a);break;case"kwm":e=await r.Decrypt(t.raw,f,a);break;case"xm":case"wav":case"mp3":case"flac":case"m4a":e=await c.Decrypt(t.raw,f,a);break;case"ogg":case"mqcc":e=await l.Decrypt(t.raw,f,a);break;case"tm0":case"tm3":e=await l.Decrypt(t.raw,f,"mp3");break;case"efe":e=await i.Decrypt(t.raw,f,a);break;case"mflacc0":case"mggc1":case"mggc0":e=await s.Decrypt(t.raw,f,a);break;case"qmc0":case"qmc2":case"qmc3":case"qmc8":case"qmcflac":case"qmcogg":case"tkm":case"bkcmp3":case"bkcflac":case"bkcm4a":case"bkcwav":case"bkcogg":case"mflac":case"mgg":case"mflac0":case"mflac1":case"mgg1":case"mgg0":case"mggl":case"666c6163":case"6d7033":case"6f6767":case"6d3461":case"776176":e=await o.Decrypt(t.raw,f,a);break;case"tm2":case"tm6":e=await d.Decrypt(t.raw,f);break;default:e={status:!1,message:"不支持此文件格式"}}return e.rawExt||(e.rawExt=a),e.rawFilename||(e.rawFilename=f),e}},bfa2:function(t,e,a){var n=a("3d67"),r=["CommonDecrypt"];t.exports=function(){var t=new Worker(a.p+"88e795813b92a64cbd4e.worker.js",{name:"[hash].worker.js"});return n(t,r),t}},d776:function(t,e,a){"use strict";a.r(e),a.d(e,"Decrypt",(function(){return s}));a("e260"),a("ace4"),a("e6cf"),a("5cc6"),a("b39a"),a("ddb0"),a("2b3d");var n=a("06dc"),r=a("9603"),c=a("acf9");const o=a("cb96"),i={mflacc0:{handler:r["a"],ext:"flac"},mggc1:{handler:r["b"],ext:"ogg"},mggc0:{handler:r["b"],ext:"ogg"}};async function s(t,e,a){if(!(a in i))return{status:!1,message:"File type is incorrect!"};const r=i[a],s=new Uint8Array(await Object(n["d"])(t));let l=s,d=r.handler(l);if(void 0===d)return{status:!1,message:a+"格式仅提供实验性支持"};let u=d.Decrypt(l);const f=Object(n["b"])(u,r.ext),m=n["a"][f];let h=new Blob([u],{type:m});const b=await o.parseBlob(h);for(let n in b.native)b.native[n].some(t=>"TCON"===t.id&&"(12)"===t.value)&&(b.common.artist=Object(c["decode"])(b.common.artist,"gbk"),b.common.title=Object(c["decode"])(b.common.title,"gbk"),b.common.album=Object(c["decode"])(b.common.album,"gbk"));const p=Object(n["e"])(b.common.artist,b.common.title,e);return{status:!0,title:p.title,artist:p.artist,ext:f,album:b.common.album,file:URL.createObjectURL(h),mime:m}}},dd48:function(t,e,a){"use strict";a.r(e),a.d(e,"Decrypt",(function(){return o}));a("e260"),a("fb6a"),a("ace4"),a("e6cf"),a("5cc6"),a("b39a"),a("ddb0"),a("2b3d");var n=a("06dc"),r=a("acf9");const c=a("cb96");async function o(t,e,a){const o=new Uint8Array(await Object(n["d"])(t));let l=i(o);void 0===l&&(l=s(o));let d=Math.min(5324800,o.length);for(let n=0;n<d;n++)o[n]^=l[n%64];const u=Object(n["b"])(o,"mp3");t=new Blob([o],{type:n["a"][u]});const f=await c.parseBlob(t);for(let n in f.native)f.native[n].some(t=>"TCON"===t.id&&"(12)"===t.value)&&(f.common.artist=Object(r["decode"])(f.common.artist,"gbk"),f.common.title=Object(r["decode"])(f.common.title,"gbk"),f.common.album=Object(r["decode"])(f.common.album,"gbk"));const m=Object(n["e"])(f.common.artist,f.common.title,e);return{status:!0,title:m.title,artist:m.artist,ext:u,album:f.common.album,file:URL.createObjectURL(t),mime:n["a"][u]}}function i(t){let e,a,r=Math.min(32768,t.length);for(let o=0;o<r;o+=128)try{e=t.slice(o,o+128);const r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];if(Object(n["f"])(e.slice(0,64),e.slice(64))&&Object(n["f"])(r,e.slice(32,64))&&Object(n["f"])(r,e.slice(96))){a=e.slice(64);break}}catch(c){}return a}function s(t){const e=t.slice(128,144),a=t.slice(16,32),n=t.slice(80,96),r=t.slice(144,160),c=t.slice(208,224),o=t.slice(272,288),i=t.slice(336,352),s=t.slice(400,416),l=t.slice(464,480),d=t.slice(528,544),u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let f,m=[],h=[];for(let p=0;p<a.length;p++){f=[a[p],n[p],r[p],c[p],o[p],i[p],s[p],l[p],d[p]];let t,u={};for(let e=0;e<f.length;e++)t=f[e],u[t]?u[t]++:u[t]=1;let b=0,g={};for(t in u)b<u[t]&&(b=u[t],g=t);let w=Number(g);h.push(w),m.push(e[p])}let b=m.concat(h,u);return b}},dde9:function(t,e,a){"use strict";a.r(e),a.d(e,"Decrypt",(function(){return s}));a("c975"),a("e260"),a("fb6a"),a("ace4"),a("e6cf"),a("25f0"),a("5cc6"),a("b39a"),a("ddb0"),a("2b3d");var n=a("06dc");const r=a("3452"),c=r.enc.Hex.parse("687a4852416d736f356b496e62617857"),o=r.enc.Hex.parse("2331346C6A6B5F215C5D2630553C2728"),i=[67,84,69,78,70,68,65,77];async function s(t,e,a){const r=await Object(n["d"])(t),c=new DataView(r);if(!Object(n["f"])(i,new Uint8Array(r,0,8)))return{status:!1,message:"此ncm文件已损坏"};const o=l(c,r,10),s=d(o.data),f=u(c,r,o.offset),m=f.data;let h=f.offset+c.getUint32(f.offset+5,!0)+13,b=new Uint8Array(r,h),p=b.length;for(let n=0;n<p;++n)b[n]^=s[255&n];void 0===m.album&&(m.album="");const g=[];m.artist&&m.artist.forEach(t=>g.push(t[0]));const w=Object(n["e"])(g.join(" & "),m.musicName,e);0===g.length&&g.push(w.artist),void 0===m.format&&(m.format=Object(n["b"])(b,"mp3")),"mp3"===m.format&&(b=await Object(n["h"])(b,g,w.title,m.album));const y=n["a"][m.format],v=new Blob([b],{type:y});return{status:!0,title:w.title,artist:w.artist,ext:m.format,album:m.album,file:URL.createObjectURL(v),mime:y}}function l(t,e,a){const n=t.getUint32(a,!0);a+=4;const o=new Uint8Array(e,a,n).map(t=>100^t);a+=n;const i=r.AES.decrypt({ciphertext:r.lib.WordArray.create(o)},c,{mode:r.mode.ECB,padding:r.pad.Pkcs7}),s=new Uint8Array(i.sigBytes),l=i.words,d=i.sigBytes;for(let r=0;r<d;r++)s[r]=l[r>>>2]>>>24-r%4*8&255;return{offset:a,data:s.slice(17)}}function d(t){const e=new Uint8Array(Array(256).keys()),a=t.length;let n=0;for(let r=0;r<256;r++)n=e[r]+n+t[r%a]&255,[e[r],e[n]]=[e[n],e[r]];return e.map((t,e,a)=>{e=e+1&255;const n=a[e],r=a[e+n&255];return a[n+r&255]})}function u(t,e,a){const n=t.getUint32(a,!0);if(a+=4,0===n)return{data:{},offset:a};const c=new Uint8Array(e,a,n).map(t=>99^t);a+=n;const i=r.AES.decrypt({ciphertext:r.enc.Base64.parse(r.lib.WordArray.create(c.slice(22)).toString(r.enc.Utf8))},o,{mode:r.mode.ECB,padding:r.pad.Pkcs7}).toString(r.enc.Utf8),s=i.indexOf(":");let l=JSON.parse(i.slice(s+1));return"dj"===i.slice(0,s)&&(l=l.mainMusic),{data:l,offset:a}}},fa6ff:function(t,e,a){"use strict";var n=a("2dfe"),r=a.n(n);r.a},fd2f:function(t,e,a){"use strict";a.r(e),a.d(e,"Decrypt",(function(){return o}));a("e260"),a("ace4"),a("e6cf"),a("5cc6"),a("b39a"),a("ddb0"),a("2b3d");var n=a("06dc"),r=a("acf9");const c=a("cb96");async function o(t,e,a,o=!0){let i=a;if(o){const e=new Uint8Array(await Object(n["d"])(t));i=Object(n["b"])(e,a),i!==a&&(t=new Blob([e],{type:n["a"][i]}))}const s=await c.parseBlob(t);for(let n in s.native)s.native[n].some(t=>"TCON"===t.id&&"(12)"===t.value)&&(s.common.artist=Object(r["decode"])(s.common.artist,"gbk"),s.common.title=Object(r["decode"])(s.common.title,"gbk"),s.common.album=Object(r["decode"])(s.common.album,"gbk"));const l=Object(n["e"])(s.common.artist,s.common.title,e);return{status:!0,title:l.title,artist:l.artist,ext:i,album:s.common.album,file:URL.createObjectURL(t),mime:n["a"][i]}}}});